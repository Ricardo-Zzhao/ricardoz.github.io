<!doctype html><html lang=zh-cn dir=content/zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=content-security-policy content="upgrade-insecure-requests"><title>Bash脚本语法1 - 书藏的博客</title><meta name=keywords content="博客,程序员,区块链，思考,读书,笔记,生活,电影,旅游,"><meta name=author content="书藏"><meta property="og:title" content="Bash脚本语法1"><meta property="og:site_name" content="书藏的博客"><meta property="og:image" content="/img/author.jpg"><meta name=title content="Bash脚本语法1 - 书藏的博客"><meta name=description content="书藏的个人博客，记录学习的东西，以月刊记录生活"><link rel="shortcut icon" href=/img/favicon.ico><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><link href=//cdn.bootcdn.net/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css rel=stylesheet type=text/css><link href=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.css rel=stylesheet><link href=/css/main.css rel=stylesheet type=text/css><link href=/css/syntax.css rel=stylesheet type=text/css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-209130979-1"></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-209130979-1 ');</script></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-hans><div class="container one-collumn sidebar-position-left page-home"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle role=button style=opacity:1;top:0><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><div class=multi-lang-switch><i class="fa fa-fw fa-language" style=margin-right:5px></i><a class=lang-link id=zh-cn href=#>中文</a></div><div class=custom-logo-site-title><a href=/ class=brand rel=start><span class=logo-line-before><i></i></span><span class=site-title>书藏的博客</span>
<span class=logo-line-after><i></i></span></a></div><p class=site-subtitle>凡心所向，素履以往</p></div><div class=site-nav-right><div class="toggle popup-trigger" style=opacity:1;top:0><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul id=menu class=menu><li class=menu-item><a href=/ rel=section><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class=menu-item><a href=/post rel=section><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class=menu-item><a href=/about.html rel=section><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于我</a></li><li class=menu-item><a href=/404.html rel=section><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益404</a></li><li class="menu-item menu-item-search"><a href=javascript:; class=popup-trigger><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class=site-search><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class=search-icon><i class="fa fa-search"></i></span><span class=popup-btn-close><i class="fa fa-times-circle"></i></span><div class=local-search-input-wrapper><input autocomplete=off placeholder=搜索关键字... spellcheck=false type=text id=local-search-input autocapitalize=none autocorrect=off></div></div><div id=local-search-result></div></div></div></nav></div></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><section id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://shuzang.github.io/post/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/bash-script-grammer-1/ itemprop=url>Bash脚本语法1</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>时间：</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2020-08-18">2020-08-18</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>分类：</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90 itemprop=url rel=index style=text-decoration:underline><span itemprop=name>爱编程爱技术的孩子</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>字数：</span>
<span class=leancloud-world-count>4109 字</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>阅读：</span>
<span class=leancloud-view-count>9分钟</span></span>
<span id=/post/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/bash-script-grammer-1/ class=leancloud_visitors data-flag-title=Bash脚本语法1>|
<i class="fa fa-binoculars fa-fw"></i><span class=post-meta-item-text>阅读次数：</span>
<span class=leancloud-visitors-count></span></span></div></header><div class=post-body itemprop=articleBody><p>很多时候都要求能使用 Shell 脚本进行编程，本文是根据阮一峰大神的 <a href=https://wangdoc.com/bash/intro.html>系列教程</a> 总结的基本知识。</p><h2 id=1-shell-和-bash>1. Shell 和 Bash</h2><p>Shell 是一个程序，为用户提供和内核的交互界面，一般由用户从键盘输入命令，然后送给操作系统指向，执行完毕将结果返回给用户，因此又称为命令行环境。</p><p>只要能给用户提供命令行界面用于和内核交互，就叫 Shell，因此 Shell 有很多种，比如</p><ul><li>Bourne Shell（sh）</li><li>Bourne Again shell（bash）</li><li>C Shell（csh）</li></ul><p>Bash 是目前最常用的 Shell，一般也是默认的 Shell。</p><p>具有图形界面的 Linux 打开的命令行一般是终端模拟器，顾名思义，就是模拟命令行环境的，不是真正的命令行，但使用和直接使用非图形界面的命令行没有区别。因此我们随后不区分终端和命令行，全部使用命令行这个称呼。</p><p>图形界面下使用 <code>Ctrl + Alt + T</code> 打开命令行，默认位于用户主目录 <code>~</code>，提示符为美元符号 <code>$</code>，输入 <code>exit</code> 命令或使用快捷键 <code>Ctrl + D</code> 退出当前命令行。</p><h2 id=2-预备知识>2. 预备知识</h2><p>使用 <code>echo</code> 命令可以在屏幕上输入文本，添加引号可以输出多行文本，添加 <code>-e</code> 参数会解释引号中的特殊字符。该命令经常使用。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>echo</span> hello world
hello world

$ <span style=color:#a2f>echo</span> <span style=color:#b44>&#34;hello
</span><span style=color:#b44>world&#34;</span>
hello
world

$ <span style=color:#a2f>echo</span> -e <span style=color:#b44>&#34;hello\nworld&#34;</span>
hello
world
</code></pre></div><p>Bash 单个命令一般都是一行，按下回车开始执行，比较长的命令可以写成多行，只需要在每一行的末尾加上反斜杠即可</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>echo</span> foo <span style=color:#b62;font-weight:700>\
</span><span style=color:#b62;font-weight:700></span>bar
foo bar
</code></pre></div><p><code>&&</code> 和 <code>||</code> 用于连接两个命令，前者的含义是如果第一个命令执行成功，执行第二个命令；后者的含义是如果第一个命令执行失败，执行第二个命令，第一个命令执行成功就不会执行第二个命令了。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mkdir foo <span style=color:#666>&amp;&amp;</span> ls foo
$ mkdir foo <span style=color:#666>||</span> mkdir bar
mkdir: 无法创建目录 “foo”: 文件已存在
$ ls 
foo bar
</code></pre></div><p>Bash 只有一种数据类型，就是字符串。不管用户输入什么数据，Bash 都视为字符串。</p><p>还有一些实用的快捷键</p><ul><li><code>Ctrl + L</code>：清除屏幕并将当前行移到页面顶部。</li><li><code>Ctrl + C</code>：中止当前正在执行的命令。</li><li><code>Shift + PageUp</code>：向上滚动。</li><li><code>Shift + PageDown</code>：向下滚动。</li><li><code>Ctrl + U</code>：从光标位置删除到行首。</li><li><code>Ctrl + K</code>：从光标位置删除到行尾。</li><li><code>↑</code>，<code>↓</code>：浏览已执行命令的历史记录。</li><li><code>Tab</code>：补全未完全输入的命令或路径</li></ul><h2 id=3-模式扩展>3. 模式扩展</h2><p>用户输入的命令中有时包括一些特殊的字符，Shell 会先对这些字符进行替换，然后才开始执行，这个过程叫做模式扩展。Shell 提供 8 种模式扩展。</p><ol><li><p><code>~</code>：用户主目录</p></li><li><p><code>?</code>：单个字符，但不包括空字符</p></li><li><p><code>*</code>：任意数量的任意字符，包括 0 个</p></li><li><p><code>[...]</code>：匹配方括号中出现的任意字符，如果前面加了 <code>^</code> 或 <code>!</code> 表示匹配方括号中没有出现的字符</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080;font-style:italic># 只存在文件 a.txt</span>
$ ls <span style=color:#666>[</span>ab<span style=color:#666>]</span>.txt
a.txt
   
<span style=color:#080;font-style:italic># 存在 aaa、bbb、aba 三个文件</span>
$ ls ?<span style=color:#666>[</span>!a<span style=color:#666>]</span>?
aba bbb
</code></pre></div><p><code>[start-end]</code>：匹配一个连续的范围，同样，实用 <code>!</code> 可以匹配不属于该范围的字符</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080;font-style:italic># 存在文件 a.txt、b.txt 和 c.txt</span>
$ ls <span style=color:#666>[</span>a-c<span style=color:#666>]</span>.txt
a.txt
b.txt
c.txt
</code></pre></div></li><li><p><code>{...}</code>：匹配大括号中的所有字符</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>echo</span> d<span style=color:#666>{</span>a,e,i,u,o<span style=color:#666>}</span>g
dag deg dig dug dog
</code></pre></div><p><code>{start...end}</code>：扩展成一个连续序列</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>echo</span> <span style=color:#666>{</span>1..4<span style=color:#666>}</span>
<span style=color:#666>1</span> <span style=color:#666>2</span> <span style=color:#666>3</span> <span style=color:#666>4</span>
</code></pre></div></li><li><p><code>$</code>：将 <code>$</code> 开头的变量替换为变量的值</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>echo</span> <span style=color:#b8860b>$SHELL</span>
/bin/bash
</code></pre></div></li><li><p><code>$(...)</code>：扩展成另一个命令的运行结果，该命令所有输出都作为返回值</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>echo</span> <span style=color:#a2f;font-weight:700>$(</span>date<span style=color:#a2f;font-weight:700>)</span>
Tue Jan <span style=color:#666>28</span> 00:01:13 CST <span style=color:#666>2020</span>
</code></pre></div></li><li><p><code>$((...))</code>：扩展成整数运算的结果</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>echo</span> <span style=color:#a2f;font-weight:700>$((</span><span style=color:#666>2</span> <span style=color:#666>+</span> <span style=color:#666>2</span><span style=color:#a2f;font-weight:700>))</span>
<span style=color:#666>4</span>
</code></pre></div></li></ol><p>模式扩展先于正则表达式出现，可以看作原始的正则表达式，但没有正则表达式灵活。</p><h2 id=4-变量>4. 变量</h2><p>用<code>env</code>命令显示所有环境变量，<code>echo</code>命令查看单个环境变量的值</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ env
$ <span style=color:#a2f>echo</span> <span style=color:#b8860b>$PATH</span>
</code></pre></div><p>BASH 的变量名区分大小写，由于环境变量一般使用全大写，用户自定义变量一般也使用全大写。</p><h3 id=41-创建变量>4.1 创建变量</h3><p>变量声明语法如下，等号两边不可有空格</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#b8860b>variable</span><span style=color:#666>=</span>value
</code></pre></div><p>如果变量的值中有空格，使用引号包围</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#b8860b>myvar</span><span style=color:#666>=</span><span style=color:#b44>&#34;hello world&#34;</span>
</code></pre></div><p>BASH 没有数据类型的概念，所有变量都是字符串。</p><p>下面是一些自定义变量的例子。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#b8860b>a</span><span style=color:#666>=</span>z                     <span style=color:#080;font-style:italic># 变量 a 赋值为字符串 z</span>
<span style=color:#b8860b>b</span><span style=color:#666>=</span><span style=color:#b44>&#34;a string&#34;</span>            <span style=color:#080;font-style:italic># 变量值包含空格，就必须放在引号里面</span>
<span style=color:#b8860b>c</span><span style=color:#666>=</span><span style=color:#b44>&#34;</span><span style=color:#b44>a string and </span><span style=color:#b8860b>$b</span><span style=color:#b44>&#34;</span>     <span style=color:#080;font-style:italic># 变量值可以引用其他变量的值</span>
<span style=color:#b8860b>d</span><span style=color:#666>=</span><span style=color:#b44>&#34;\t\ta string\n&#34;</span>      <span style=color:#080;font-style:italic># 变量值可以使用转义字符，echo 输出要加 -e 参数</span>
<span style=color:#b8860b>e</span><span style=color:#666>=</span><span style=color:#a2f;font-weight:700>$(</span>ls -l foo.txt<span style=color:#a2f;font-weight:700>)</span>      <span style=color:#080;font-style:italic># 变量值可以是命令的执行结果</span>
<span style=color:#b8860b>f</span><span style=color:#666>=</span><span style=color:#a2f;font-weight:700>$((</span><span style=color:#666>5</span> <span style=color:#666>*</span> <span style=color:#666>7</span><span style=color:#a2f;font-weight:700>))</span>            <span style=color:#080;font-style:italic># 变量值可以是数学运算的结果</span>
</code></pre></div><p>变量可以重复赋值，后面的赋值会覆盖前面的赋值。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#b8860b>foo</span><span style=color:#666>=</span><span style=color:#666>1</span>
$ <span style=color:#b8860b>foo</span><span style=color:#666>=</span><span style=color:#666>2</span>
$ <span style=color:#a2f>echo</span> <span style=color:#b8860b>$foo</span>
<span style=color:#666>2</span>
</code></pre></div><p>上面例子中，变量<code>foo</code>的第二次赋值会覆盖第一次赋值。</p><h3 id=42-读取变量>4.2 读取变量</h3><p>读取变量的时候，直接在变量名前加上<code>$</code>就可以了。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#b8860b>foo</span><span style=color:#666>=</span>bar
$ <span style=color:#a2f>echo</span> <span style=color:#b8860b>$foo</span>
bar
</code></pre></div><p>如果变量不存在，Bash 不会报错，而会输出空字符。</p><p>读取变量的时候，变量名也可以使用花括号<code>{}</code>包围，比如<code>$a</code>也可以写成<code>${a}</code>。这种写法可以用于变量名与其他字符连用的情况。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#b8860b>a</span><span style=color:#666>=</span>foo
$ <span style=color:#a2f>echo</span> <span style=color:#b8860b>$a_file</span>

$ <span style=color:#a2f>echo</span> <span style=color:#b68;font-weight:700>${</span><span style=color:#b8860b>a</span><span style=color:#b68;font-weight:700>}</span>_file
foo_file
</code></pre></div><h3 id=43-删除变量>4.3 删除变量</h3><p><code>unset</code>命令用来删除一个变量。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#a2f>unset</span> NAME
</code></pre></div><p>这个命令不是很有用。因为不存在的 Bash 变量一律等于空字符串，所以即使<code>unset</code>命令删除了变量，还是可以读取这个变量，值为空字符串。</p><p>所以，删除一个变量，也可以将这个变量设成空字符串。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#b8860b>foo</span><span style=color:#666>=</span><span style=color:#b44>&#39;&#39;</span>
$ <span style=color:#b8860b>foo</span><span style=color:#666>=</span>
</code></pre></div><h3 id=44-输出变量>4.4 输出变量</h3><p>用户创建的变量仅可用于当前 Shell，子 Shell 默认读取不到父 Shell 定义的变量。为了把变量传递给子 Shell，需要使用<code>export</code>命令。这样输出的变量，对于子 Shell 来说就是环境变量。</p><p><code>export</code>命令用来向子 Shell 输出变量。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#b8860b>NAME</span><span style=color:#666>=</span>foo
<span style=color:#a2f>export</span> NAME
</code></pre></div><p>上面命令输出了变量<code>NAME</code>。变量的赋值和输出也可以在一个步骤中完成。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#a2f>export</span> <span style=color:#b8860b>NAME</span><span style=color:#666>=</span>value
</code></pre></div><p>上面命令执行后，当前 Shell 及随后新建的子 Shell，都可以读取变量<code>$NAME</code>。</p><p>子 Shell 如果修改继承的变量，不会影响父 Shell。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080;font-style:italic># 输出变量 $foo</span>
$ <span style=color:#a2f>export</span> <span style=color:#b8860b>foo</span><span style=color:#666>=</span>bar

<span style=color:#080;font-style:italic># 新建子 Shell</span>
$ bash

<span style=color:#080;font-style:italic># 读取 $foo</span>
$ <span style=color:#a2f>echo</span> <span style=color:#b8860b>$foo</span>
bar

<span style=color:#080;font-style:italic># 修改继承的变量</span>
$ <span style=color:#b8860b>foo</span><span style=color:#666>=</span>baz

<span style=color:#080;font-style:italic># 退出子 Shell</span>
$ <span style=color:#a2f>exit</span>

<span style=color:#080;font-style:italic># 读取 $foo</span>
$ <span style=color:#a2f>echo</span> <span style=color:#b8860b>$foo</span>
bar
</code></pre></div><h2 id=5-脚本>5. 脚本</h2><p>脚本（script）就是包含一系列命令的一个文本文件。Shell 读取这个文件，依次执行里面的所有命令，就好像这些命令直接输入到命令行一样。所有能够在命令行完成的任务，都能够用脚本完成。</p><p>Bash 脚本使用 <code>#</code> 声明注释</p><h3 id=51-shebang行>5.1 Shebang行</h3><p>脚本的第一行通常是指定解释器，即这个脚本必须通过什么解释器执行。这一行以<code>#!</code>字符开头，这个字符称为 Shebang，所以这一行就叫做 Shebang 行。</p><p><code>#!</code>后面就是脚本解释器的位置，Bash 脚本的解释器一般是<code>/bin/sh</code>或<code>/bin/bash</code>。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080>#!/bin/sh
</span><span style=color:#080></span><span style=color:#080;font-style:italic># 或者</span>
<span style=color:#080;font-style:italic>#!/bin/bash</span>
</code></pre></div><h3 id=52-执行权限和路径>5.2 执行权限和路径</h3><p>指定了 Shebang 行的脚本，需要赋予执行权限才可以直接执行。</p><p>权限的设定有两种格式，一种是字母格式，（r, w, x）分别表示读、写、执行，（u, g, o）分别表示脚本所有者、同组用户、其它用户，（+, -, =）分别表示增加权限、取消权限和设置唯一权限。所有的权限设定命令都是这些参数的组合，举例</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080;font-style:italic># 给所有用户执行权限</span>
$ chmod +x script.sh

<span style=color:#080;font-style:italic># 只给脚本拥有者读权限和执行权限</span>
$ chmod u+rx script.sh
</code></pre></div><p>权限还可以以数字方式设定，我们令 r=4, w=2, x=1，权限的组合就是这些操作权重的组合，权限授予的用户就是数字的位置，举例</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080;font-style:italic># 给脚本所有者全部权限，给同组和其它用户读权限和执行权限</span>
$ chmod <span style=color:#666>755</span> script.sh
</code></pre></div><h3 id=53-脚本参数>5.3 脚本参数</h3><p>调用脚本的时候，脚本文件名后面可以带有参数。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ script.sh word1 word2 word3
</code></pre></div><p>脚本文件内部，可以使用特殊变量，引用这些参数。</p><ul><li><code>$0</code>：脚本文件名，即<code>script.sh</code>。</li><li><code>$1</code>~<code>$9</code>：对应脚本的第一个参数到第九个参数。</li><li><code>$#</code>：参数的总数。</li><li><code>$@</code>：全部的参数，参数之间使用空格分隔。</li><li><code>$*</code>：全部的参数，参数之间使用变量<code>$IFS</code>值的第一个字符分隔，默认为空格，但是可以自定义。</li></ul><p>如果脚本的参数多于9个，那么第10个参数可以用<code>${10}</code>的形式引用，以此类推。</p><p>用户可以输入任意数量的参数，利用<code>for</code>循环，可以读取每一个参数。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080>#!/bin/bash
</span><span style=color:#080></span>
<span style=color:#a2f;font-weight:700>for</span> i in <span style=color:#b44>&#34;</span><span style=color:#b8860b>$@</span><span style=color:#b44>&#34;</span>; <span style=color:#a2f;font-weight:700>do</span>
  <span style=color:#a2f>echo</span> <span style=color:#b8860b>$i</span>
<span style=color:#a2f;font-weight:700>done</span>
</code></pre></div><p>注1，如果命令是<code>command -o foo bar</code>，那么<code>-o</code>是<code>$1</code>，<code>foo</code>是<code>$2</code>，<code>bar</code>是<code>$3</code>。</p><p>注2，如果命令是<code>./script.sh "a b"</code>，即多个参数放在双引号里面，视为一个参数。</p><h3 id=54-命令执行>5.4 命令执行</h3><p><code>exit</code>命令用于终止当前脚本的执行，并向 Shell 返回一个退出值。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>exit</span>
</code></pre></div><p>上面命令中止当前脚本，将最后一条命令的退出状态，作为整个脚本的退出状态。</p><p><code>exit</code>命令后面可以跟参数，该参数就是退出状态。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080;font-style:italic># 退出值为0（成功）</span>
$ <span style=color:#a2f>exit</span> <span style=color:#666>0</span>

<span style=color:#080;font-style:italic># 退出值为1（失败）</span>
$ <span style=color:#a2f>exit</span> <span style=color:#666>1</span>
</code></pre></div><p>可以使用 <code>$?</code> 判断上一条命令的执行结果控制脚本的执行</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#a2f>cd</span> <span style=color:#b8860b>$some_directory</span>
<span style=color:#a2f;font-weight:700>if</span> <span style=color:#666>[</span> <span style=color:#b44>&#34;</span><span style=color:#b8860b>$?</span><span style=color:#b44>&#34;</span> <span style=color:#666>=</span> <span style=color:#b44>&#34;0&#34;</span> <span style=color:#666>]</span>; <span style=color:#a2f;font-weight:700>then</span>
  rm *
<span style=color:#a2f;font-weight:700>else</span>
  <span style=color:#a2f>echo</span> <span style=color:#b44>&#34;无法切换目录！&#34;</span> 1&gt;&amp;<span style=color:#666>2</span>
  <span style=color:#a2f>exit</span> <span style=color:#666>1</span>
<span style=color:#a2f;font-weight:700>fi</span>
</code></pre></div><p>使用 <code>if</code> 命令可以直接判断</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#a2f;font-weight:700>if</span> <span style=color:#a2f>cd</span> <span style=color:#b8860b>$some_directory</span>; <span style=color:#a2f;font-weight:700>then</span>
  rm *
<span style=color:#a2f;font-weight:700>else</span>
  <span style=color:#a2f>echo</span> <span style=color:#b44>&#34;Could not change directory! Aborting.&#34;</span> 1&gt;&amp;<span style=color:#666>2</span>
  <span style=color:#a2f>exit</span> <span style=color:#666>1</span>
<span style=color:#a2f;font-weight:700>fi</span>
</code></pre></div><p>最简便的方法是使用逻辑连接符</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080;font-style:italic># 第一步执行成功，才会执行第二步</span>
<span style=color:#a2f>cd</span> <span style=color:#b8860b>$some_directory</span> <span style=color:#666>&amp;&amp;</span> rm *

<span style=color:#080;font-style:italic># 第一步执行失败，才会执行第二步</span>
<span style=color:#a2f>cd</span> <span style=color:#b8860b>$some_directory</span> <span style=color:#666>||</span> <span style=color:#a2f>exit</span> <span style=color:#666>1</span>
</code></pre></div><p><code>source</code>命令用于执行一个脚本，通常用于重新加载一个配置文件。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>source</span> .bashrc
</code></pre></div><p><code>source</code>命令最大的特点是在当前 Shell 执行脚本，不像直接执行脚本时，会新建一个子 Shell。所以，<code>source</code>命令执行脚本时，不需要<code>export</code>变量。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080>#!/bin/bash
</span><span style=color:#080></span><span style=color:#080;font-style:italic># test.sh</span>
<span style=color:#a2f>echo</span> <span style=color:#b8860b>$foo</span>
</code></pre></div><p><code>source</code>有一个简写形式，可以使用一个点（<code>.</code>）来表示。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ . script.sh
</code></pre></div><p>注意，要区分 <code>. script.sh</code> 和 <code>./script.sh</code></p><h3 id=55-别名>5.5 别名</h3><p><code>alias</code>命令用来为一个命令指定别名，这样更便于记忆。下面是<code>alias</code>的格式。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#a2f>alias</span> <span style=color:#b8860b>NAME</span><span style=color:#666>=</span>DEFINITION
</code></pre></div><p>上面命令中，<code>NAME</code>是别名的名称，<code>DEFINITION</code>是别名对应的原始命令。注意，等号两侧不能有空格，否则会报错。</p><p>一个常见的例子是为<code>grep</code>命令起一个<code>search</code>的别名。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#a2f>alias</span> <span style=color:#b8860b>search</span><span style=color:#666>=</span>grep
</code></pre></div><p><code>alias</code>也可以用来为长命令指定一个更短的别名。下面是通过别名定义一个<code>today</code>的命令。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>alias</span> <span style=color:#b8860b>today</span><span style=color:#666>=</span><span style=color:#b44>&#39;date +&#34;%A, %B %-d, %Y&#34;&#39;</span>
$ today
星期一, 一月 6, <span style=color:#666>2020</span>
</code></pre></div><p>有时为了防止误删除文件，可以指定<code>rm</code>命令的别名。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>alias</span> <span style=color:#b8860b>rm</span><span style=color:#666>=</span><span style=color:#b44>&#39;rm -i&#39;</span>
</code></pre></div><p>上面命令指定<code>rm</code>命令是<code>rm -i</code>，每次删除文件之前，都会让用户确认。</p><h2 id=6-用户输入>6. 用户输入</h2><p>有时，脚本需要在执行过程中，由用户提供一部分数据，这时可以使用<code>read</code>命令。它将用户的输入存入一个变量，方便后面的代码使用。用户按下回车键，就表示输入结束。</p><p><code>read</code>命令的格式如下。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#a2f>read</span> <span style=color:#666>[</span>-options<span style=color:#666>]</span> <span style=color:#666>[</span>variable...<span style=color:#666>]</span>
</code></pre></div><p>上面语法中，<code>options</code>是参数选项，<code>variable</code>是用来保存输入数值的一个或多个变量名。如果没有提供变量名，环境变量<code>REPLY</code>会包含用户输入的一整行数据。</p><p>下面是一个例子<code>demo.sh</code>。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080>#!/bin/bash
</span><span style=color:#080></span>
<span style=color:#a2f>echo</span> -n <span style=color:#b44>&#34;输入一些文本 &gt; &#34;</span>
<span style=color:#a2f>read</span> text
<span style=color:#a2f>echo</span> <span style=color:#b44>&#34;</span><span style=color:#b44>你的输入：</span><span style=color:#b8860b>$text</span><span style=color:#b44>&#34;</span>
</code></pre></div><p>上面例子中，先显示一行提示文本，然后会等待用户输入文本。用户输入的文本，存入变量<code>text</code>，在下一行显示出来。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ bash demo.sh
输入一些文本 &gt; 你好，世界
你的输入：你好，世界
</code></pre></div><p><code>read</code>可以接受用户输入的多个值。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080>#!/bin/bash
</span><span style=color:#080></span><span style=color:#a2f>echo</span> Please, enter your firstname and lastname
<span style=color:#a2f>read</span> FN LN
<span style=color:#a2f>echo</span> <span style=color:#b44>&#34;</span><span style=color:#b44>Hi! </span><span style=color:#b8860b>$LN</span><span style=color:#b44>, </span><span style=color:#b8860b>$FN</span><span style=color:#b44> !</span><span style=color:#b44>&#34;</span>
</code></pre></div><p>上面例子中，<code>read</code>根据用户的输入，同时为两个变量赋值。</p><p>如果用户的输入项少于<code>read</code>命令给出的变量数目，那么额外的变量值为空。如果用户的输入项多于定义的变量，那么多余的输入项会包含到最后一个变量中。</p><p>如果<code>read</code>命令之后没有定义变量名，那么环境变量<code>REPLY</code>会包含所有的输入。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080>#!/bin/bash
</span><span style=color:#080></span><span style=color:#080;font-style:italic># read-single: read multiple values into default variable</span>
<span style=color:#a2f>echo</span> -n <span style=color:#b44>&#34;Enter one or more values &gt; &#34;</span>
<span style=color:#a2f>read</span>
<span style=color:#a2f>echo</span> <span style=color:#b44>&#34;</span><span style=color:#b44>REPLY = &#39;</span><span style=color:#b8860b>$REPLY</span><span style=color:#b44>&#39;</span><span style=color:#b44>&#34;</span>
</code></pre></div><p>上面脚本的运行结果如下。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ read-single
Enter one or more values &gt; a b c d
<span style=color:#b8860b>REPLY</span> <span style=color:#666>=</span> <span style=color:#b44>&#39;a b c d&#39;</span>
</code></pre></div></div><footer class=post-footer><div class=post-tags><a href=/tags/linux rel=tag title=linux>#linux#</a></div><div class=addthis_inline_share_toolbox></div><div class=post-nav><div class=article-copyright><div class=article-copyright-img><img src=/img/qq_qrcode.png width=129px height=129px><div style=text-align:center>QQ扫一扫交流</div></div><div class=article-copyright-info><p><span>声明：</span>Bash脚本语法1</p><p><span>链接：</span>https://shuzang.github.io/post/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/bash-script-grammer-1/</p><p><span>作者：</span>书藏</p><p><span>声明： </span>本博客文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank style=text-decoration:underline>CC BY-NC-SA 3.0</a>许可协议，转载请注明出处！</p></div></div><div class=clear></div></div><div class=reward-qr-info><div>创作实属不易，如有帮助，那就打赏博主些许茶钱吧 ^_^</div><button id=rewardButton disable=enable onclick="var qr=document.getElementById('QR');if(qr.style.display==='none'){qr.style.display='block';}else{qr.style.display='none'}">
<span>赏</span></button><div id=QR style=display:none><div id=wechat style=display:inline-block><img id=wechat_qr src=/img/wechat-pay.png alt="WeChat Pay"><p>微信打赏</p></div><div id=alipay style=display:inline-block><img id=alipay_qr src=/img/ali-pay.png alt=Alipay><p>支付宝打赏</p></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=https://shuzang.github.io/post/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/http-method/ rel=next title=计算机网络-HTTP方法><i class="fa fa-chevron-left"></i>计算机网络-HTTP方法</a></div><div class="post-nav-prev post-nav-item"><a href=https://shuzang.github.io/post/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/operate-system-6-file-management/ rel=prev title=操作系统6-文件管理>操作系统6-文件管理
<i class="fa fa-chevron-right"></i></a></div></div><div id=wcomments></div></footer></article></section></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><section class="site-overview sidebar-panel sidebar-panel-active"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src=/images/avatar.png alt=书藏><p class=site-author-name itemprop=name>书藏</p><p class="site-description motion-element" itemprop=description></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/post/><span class=site-state-item-count>334</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>23</span>
<span class=site-state-item-name>标签</span></a></div></nav><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/shuzang/ target=_blank title=GitHub><i class="fa fa-fw fa-github"></i>GitHub</a></span></div><div class="tagcloud-of-blogroll motion-element tagcloud-of-blogroll-inline"><div class=tagcloud-of-blogroll-title><i class="fa fa-fw fa-tags"></i>标签云</div><ul class=tagcloud-of-blogroll-list><li class=tagcloud-of-blogroll-item><a href=/tags/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0>论文笔记</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E4%B9%A6%E8%97%8F%E7%9A%84%E7%94%9F%E6%B4%BB%E5%91%A8%E5%88%8A>书藏的生活周刊</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E7%A7%91%E7%A0%94%E8%AE%B0%E5%BD%95>科研记录</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/go%E8%AF%AD%E6%B3%95>Go语法</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80>计算机基础</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E6%9D%82%E8%B0%88>杂谈</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E5%8C%BA%E5%9D%97%E9%93%BE>区块链</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95>数据结构与算法</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E7%94%9F%E6%B4%BB%E6%8A%80%E8%83%BD>生活技能</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/go%E5%AE%9E%E6%88%98>Go实战</a></li></ul></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright><span class=copyright-year>&copy; 2010 - 2022</span>
<span class=with-love><i class="fa fa-heart"></i></span><span class=copyright-author>书藏的博客</span></div><div class=powered-info><span class=powered-by>Powered by - <a class=powered-link href=//gohugo.io target=_blank title=hugo>Hugo v0.63.2</a></span>
<span class=separator-line>/</span>
<span class=theme-info>Theme by - <a class=powered-link href=//github.com/elkan1788/hugo-theme-next target=_blank>NexT</a></span></div><div class=vistor-info><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span class=site-uv><i class="fa fa-user"></i><span class=busuanzi-value id=busuanzi_value_site_uv></span></span><span class=separator-line>/</span>
<span class=site-pv><i class="fa fa-eye"></i><span class=busuanzi-value id=busuanzi_value_site_pv></span></span></div><div class=license-info><span class=storage-info>Storage by
<a href=https://www.ucloud.cn/ style=font-weight:700 target=_blank>UCloud云存储</a></span>
<span class=separator-line>/</span>
<span class=license-num><a href target=_blank></a></span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i><span id=scrollpercent><span>0</span>%</span></div></div><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.min.js></script><script type=text/javascript src=/js/search.js></script><script type=text/javascript src=/js/affix.js></script><script type=text/javascript src=/js/scrollspy.js></script><script type=text/javascript>function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');var trident=ua.indexOf('Trident/');var edge=ua.indexOf('Edge/');if(msie>0||trident>0||edge>0){return-1;}
return 1;}
function getCntViewHeight(){var docHeight=$('#content').height(),winHeight=$(window).height(),cntViewHeight=(docHeight>winHeight)?(docHeight-winHeight):($(document).height()-winHeight);return cntViewHeight;}
function getScrollbarWidth(){var $div=$('<div />').addClass('scrollbar-measure').prependTo('body');var div=$div[0];var scrollbarWidth=div.offsetWidth-div.clientWidth;$div.remove();return scrollbarWidth;}
function registerBackTop(){var THRESHOLD=50;var $top=$('.back-to-top');$(window).on('scroll',function(){$top.toggleClass('back-to-top-on',window.pageYOffset>THRESHOLD);var scrollTop=$(window).scrollTop();var cntViewHeight=getCntViewHeight();var scrollPercent=(scrollTop)/(cntViewHeight);var scrollPercentRounded=Math.round(scrollPercent*100);var scrollPercentMaxed=(scrollPercentRounded>100)?100:scrollPercentRounded;$('#scrollpercent>span').html(scrollPercentMaxed);});$top.on('click',function(){$("html,body").animate({scrollTop:0,screenLeft:0,},800);});}
function initScrollSpy(){var tocSelector='.post-toc';var $tocElement=$(tocSelector);var activeCurrentSelector='.active-current';$tocElement.on('activate.bs.scrollspy',function(){var $currentActiveElement=$(tocSelector+' .active').last();removeCurrentActiveClass();$currentActiveElement.addClass('active-current');}).on('clear.bs.scrollspy',removeCurrentActiveClass);$('body').scrollspy({target:tocSelector});function removeCurrentActiveClass(){$(tocSelector+' '+activeCurrentSelector).removeClass(activeCurrentSelector.substring(1));}}
function initAffix(){var headerHeight=$('.header-inner').height();var footerOffset=parseInt($('.main').css('padding-bottom'),10);var sidebarTop=headerHeight+10;$('.sidebar-inner').affix({offset:{top:sidebarTop,bottom:footerOffset}});$(document).on('affixed.bs.affix',function(){updateTOCHeight(document.body.clientHeight-100);});}
function initTOCDimension(){var updateTOCHeightTimer;$(window).on('resize',function(){updateTOCHeightTimer&&clearTimeout(updateTOCHeightTimer);updateTOCHeightTimer=setTimeout(function(){var tocWrapperHeight=document.body.clientHeight-100;updateTOCHeight(tocWrapperHeight);},0);});updateTOCHeight(document.body.clientHeight-100);var scrollbarWidth=getScrollbarWidth();$('.post-toc').css('width','calc(100% + '+scrollbarWidth+'px)');}
function updateTOCHeight(height){height=height||'auto';$('.post-toc').css('max-height',height);}
$(function(){var sidebarTop=$('.header-inner').height()+10;$('#sidebar').css({'margin-top':sidebarTop}).show();var sidebarMt=parseInt($('#sidebar').css('margin-top'));var sidebarInHeight=parseInt($('.sidebar-inner').css('height'));var sideHeight=sidebarMt+sidebarInHeight;var contentHeight=$('.content-wrap').height();if(contentHeight<sideHeight){$('.content-wrap').css('min-height',sideHeight);}
$('.site-nav-toggle').on('click',function(){var $siteNav=$('.site-nav');var $toggleLine=$('.toggle');var ON_CLASS_NAME='site-nav-on';var CLOSE_CLASS_NAME='toggle-close';var isSiteNavOn=$siteNav.hasClass(ON_CLASS_NAME);var animateAction=isSiteNavOn?'slideUp':'slideDown';var animateCallback=isSiteNavOn?'removeClass':'addClass';$siteNav.stop()[animateAction]('normal',function(){$siteNav[animateCallback](ON_CLASS_NAME);$toggleLine[animateCallback](CLOSE_CLASS_NAME);});});registerBackTop();initScrollSpy();initAffix();initTOCDimension();$('.sidebar-nav-toc').click(function(){$(this).addClass('sidebar-nav-active');$(this).next().removeClass('sidebar-nav-active');$('.'+$(this).next().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});$('.sidebar-nav-overview').click(function(){$(this).addClass('sidebar-nav-active');$(this).prev().removeClass('sidebar-nav-active');$('.'+$(this).prev().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});});</script><script src=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.js></script><script type=text/javascript>$(function(){$('.post-body').viewer();});</script><script type=text/javascript>$(function(){if(detectIE()>0){$.getScript(document.location.protocol+'//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js',function(){new Waline({el:'#wcomments',visitor:true,avatar:'wavatar',avatarCDN:'https://sdn.geekzu.org/avatar/',avatarForce:!1,wordLimit:'200',placeholder:' 欢迎留下您的宝贵建议，请填写您的昵称和邮箱便于后续交流. ^_^ ',requiredFields:['nick','mail'],serverURL:"Your WalineSerURL",lang:"zh-cn"});});}else{$('#wcomments').html('抱歉，Waline插件不支持IE或Edge，建议使用Chrome浏览器。');}});</script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=Your%20AddthisId"></script><script>(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js';}
else{bp.src='http://push.zhanzhang.baidu.com/push.js';}
var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script></body></html>