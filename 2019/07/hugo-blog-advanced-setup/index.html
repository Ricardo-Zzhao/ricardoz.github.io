<!doctype html><html lang=zh-cn dir=content/zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=content-security-policy content="upgrade-insecure-requests"><title>hugo搭建个人博客3-进阶设置 - 书藏的博客</title><meta name=keywords content="博客,程序员,区块链，思考,读书,笔记,生活,电影,旅游,"><meta name=author content="书藏"><meta property="og:title" content="hugo搭建个人博客3-进阶设置"><meta property="og:site_name" content="书藏的博客"><meta property="og:image" content="/img/avatar.png"><meta name=title content="hugo搭建个人博客3-进阶设置 - 书藏的博客"><meta name=description content="书藏的个人博客，记录学习的东西，以月刊记录生活"><link rel="shortcut icon" href=/img/favicon.ico><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><link href=//cdn.bootcdn.net/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css rel=stylesheet type=text/css><link href=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.css rel=stylesheet><link href=/css/main.css rel=stylesheet type=text/css><link href=/css/syntax.css rel=stylesheet type=text/css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-209130979-1"></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-209130979-1 ');</script></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-hans><div class="container one-collumn sidebar-position-left page-home"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle role=button style=opacity:1;top:0><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><div class=multi-lang-switch><i class="fa fa-fw fa-language" style=margin-right:5px></i><a class=lang-link id=zh-cn href=#>中文</a></div><div class=custom-logo-site-title><a href=/ class=brand rel=start><span class=logo-line-before><i></i></span><span class=site-title>书藏的博客</span>
<span class=logo-line-after><i></i></span></a></div><p class=site-subtitle>凡心所向，素履以往</p></div><div class=site-nav-right><div class="toggle popup-trigger" style=opacity:1;top:0><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul id=menu class=menu><li class=menu-item><a href=/ rel=section><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class=menu-item><a href=/post rel=section><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class=menu-item><a href=/about.html rel=section><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于我</a></li><li class="menu-item menu-item-search"><a href=javascript:; class=popup-trigger><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class=site-search><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class=search-icon><i class="fa fa-search"></i></span><span class=popup-btn-close><i class="fa fa-times-circle"></i></span><div class=local-search-input-wrapper><input autocomplete=off placeholder=搜索关键字... spellcheck=false type=text id=local-search-input autocapitalize=none autocorrect=off></div></div><div id=local-search-result></div></div></div></nav></div></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><section id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://shuzang.github.io/2019/07/hugo-blog-advanced-setup/ itemprop=url>hugo搭建个人博客3-进阶设置</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>时间：</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2019-07-12">2019-07-12</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>分类：</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90 itemprop=url rel=index style=text-decoration:underline><span itemprop=name>爱编程爱技术的孩子</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>字数：</span>
<span class=leancloud-world-count>5439 字</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>阅读：</span>
<span class=leancloud-view-count>11分钟</span></span>
<span id=/2019/07/hugo-blog-advanced-setup/ class=leancloud_visitors data-flag-title=hugo搭建个人博客3-进阶设置>|
<i class="fa fa-binoculars fa-fw"></i><span class=post-meta-item-text>阅读次数：</span>
<span class=leancloud-visitors-count></span></span></div></header><div class=post-body itemprop=articleBody><p>本文是 Hugo 使用记录的第二篇，介绍如何为Hugo开启更多的功能。</p><h2 id=1-添加菜单栏页面>1. 添加菜单栏页面</h2><p>我们可以自己建立新的菜单页面<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> ，比如我新建<code>life</code>页面用作展示阅读的书籍、电影和游览的景点。建立页面文件的命令如下：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ hugo new life.md
</code></pre></div><p>然后编辑项目根目录下的站点配置文件<code>config.toml</code>，添加页面说明。其中<code>weight</code>字段的值决定了该页面在菜单栏的顺序<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>，其值越大，顺序越靠后。按照习惯，<code>About</code>页面放在最后，所以其<code>weight</code>字段值设置为5。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#080;font-style:italic># 添加Tags和Life菜单，并修改About菜单的weight字段值为5（为了调整菜单栏显示顺序）</span>
  [[menu.main]]
    name = <span style=color:#b44>&#34;Tags&#34;</span>
    url = <span style=color:#b44>&#34;/tags/&#34;</span>
    weight = <span style=color:#666>3</span>

  [[menu.main]]
    name = <span style=color:#b44>&#34;Life&#34;</span>
    url = <span style=color:#b44>&#34;/life/&#34;</span>
    weight = <span style=color:#666>4</span>
</code></pre></div><p>新建的life.md文件位于content目录下，编辑文件内容从而决定实际的页面显示内容。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ls content -l
total <span style=color:#666>2</span>
-rw-r--r-- <span style=color:#666>1</span> lylw1 <span style=color:#666>197609</span>  <span style=color:#666>658</span>  9月 <span style=color:#666>16</span> 11:34 about.md
-rw-r--r-- <span style=color:#666>1</span> lylw1 <span style=color:#666>197609</span> <span style=color:#666>3343</span>  9月 <span style=color:#666>25</span> 11:34 life.md
</code></pre></div><h2 id=2-字数统计>2. 字数统计</h2><p>中文(<a href=https://github.com/nodejh/hugo-theme-cactus-plus/issues/18>详情</a>)统计的支持可以通过在<code>config.toml</code>中添加如下语句启用</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml>hasCJKLanguage = <span style=color:#a2f;font-weight:700>true</span>
</code></pre></div><h2 id=2-开启评论>2. 开启评论</h2><p>使用gitalk，首先在GitHub 上创建一个 <a href=https://github.com/settings/applications/new>Github Application</a>，记录 <code>Client ID</code> 和 <code>Client Secret</code></p><p>然后编辑<code>config.toml</code>以下字段</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml>[params.gitalk]
owner = <span style=color:#b44>&#34;shuzang&#34;</span>       <span style=color:#080;font-style:italic># 你的GitHub ID       </span>
repo = <span style=color:#b44>&#34;blog&#34;</span>        <span style=color:#080;font-style:italic># 博客网址    </span>
clientId = <span style=color:#b44>&#34;&#34;</span>    <span style=color:#080;font-style:italic># 刚刚记录的client ID      </span>
clientSecret = <span style=color:#b44>&#34;&#34;</span> <span style=color:#080;font-style:italic># 刚刚记录的client secret</span>
labels = <span style=color:#b44>&#34;gitalk&#34;</span>
</code></pre></div><p>提交到仓库后就能看到博文下开启了评论区</p><p>现在更换使用Valine评论系统，步骤暂未总结</p><h2 id=3-打赏>3. 打赏</h2><p>有些主题支持加入打赏图片，但KeepIt不支持，不过这里还是记录一下。利用<a href=http://www.9thws.com/#>第九工厂</a>的免费模板制作好看的打赏二维码。</p><h2 id=4-英文url>4. 英文URL</h2><p>文章分享和访问时，中文URL是最麻烦的一件事情，为了解决这个问题，我阅读了一遍hugo文档中的<a href=https://gohugo.io/content-management/urls/>URL Management</a>，最终决定使用如下办法。</p><p>首先修改站点配置文件<code>config.toml</code>中的<code>Permalinks</code>字段如下</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml>[Permalinks]
 posts = <span style=color:#b44>&#34;/:year/:month/:slug/&#34;</span>
</code></pre></div><p>初始状态该字段值为<code>posts = "/:year/:month/:filename/"</code>，使用文件名作为URL，但是文件名作为管理和查找的手段，使用英文较为不便，而文章标题为了便于阅读，也不方便命名为英文，只能使用额外的<code>slug</code>字段。</p><p>之后在每篇文章头部的配置信息中添加<code>slug</code>字段即可，一个例子如下</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml>title<span>:</span> Golang语法基础100问
date<span>:</span> <span style=color:#666>2019</span><span style=color:#666>-12</span><span style=color:#666>-23</span>
slug<span>:</span> <span style=color:#b44>&#34;100 question of Golang basic syntax&#34;</span>
tags<span>:</span> [Golang]
toc<span>:</span> <span style=color:#a2f;font-weight:700>true</span>
categories<span>:</span> [爱编程爱技术的孩子]
</code></pre></div><p>这篇文章最后的URL将会是<code>http://shuzang.github.io/2019/12/100-question-of-golang-basic-syntax/</code></p><h2 id=5-图片插入>5. 图片插入</h2><p>博客维护所面临的一个重要问题就是图床，一开始使用Github作为图床，后来迁移到Github issue，再后来因为图片经常加载不出来，迁移到了路过图床，不过用别的图床总归不放心，图片不多的情况下，最终决定将所有图片放到本地，操作步骤如下</p><p>首先，对于Hugo来说，所有的静态文件都应该位于根目录的static目录下，比如，我在该目录下存放了 <code>example.img</code> 图片，那么在文章中就可以用以下方式引用图片</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>![](/example.img)
</code></pre></div><p>这是因为静态文件的查找规则就是以 static 为根目录，所以图片从这里寻找。为了保证清晰的文件结构，便于之后寻找图片，我们采用如下规则存放图片：一篇文章的所有图片放在以文章名命名的一个文件夹中，该文件夹放在<code>static/images</code>目录下。如本文文件名为「hugo搭建个人博客3-进阶设置」，则本文所有图片放在 <code>static/images/hugo搭建个人博客3-进阶设置</code>目录下，在文章中插入图片时，使用的路径为</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>![](/images/example.img)
</code></pre></div><p>其中，example.img为图片名。至此为止，网页中可以正常显示插入的图片，但是Typora中无法显示图片，因此我们需要设置Typora的图片根目录，方法是在文章开头的YAML头中添加如下字段</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#bbb>
</span></code></pre></div><p>路径根据自己的文章位置而定，也可以在工具栏选择「格式—>图像—>设置图片根目录」，产生的效果是相同的，也是在文章头部添加该字段。</p><p>最后，我们在Typora的偏好设置中，设置插入图片时自动复制到相应的目录下即可，这样所有的图片都可以和博客代码存放在一起。、</p><p>这种方法唯一的缺点是所有图片和博客项目源码的总大小不能超过1G，因为一个Github项目空间最大1G</p><h2 id=6-自定义样式>6. 自定义样式</h2><p>通过定义自定义 <code>.scss</code> 样式文件, <strong>LoveIt</strong> 主题支持可配置的样式.</p><p>包含自定义 <code>.scss</code> 样式文件的目录相对于 <strong>你的项目根目录</strong> 的路径为 <code>config/css</code>.</p><p>在 <code>config/css/_override.scss</code> 中, 你可以覆盖 <code>themes/LoveIt/assets/css/_variables.scss</code> 中的变量以自定义样式.</p><p>这是一个例子:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=color:#a2f;font-weight:700>@import</span> <span style=color:green>url(</span><span style=color:green>&#39;https://fonts.googleapis.com/css?family=Fira+Mono:400,700&amp;display=swap&amp;subset=latin-ext&#39;</span><span style=color:green>)</span>;
<span style=color:#b8860b>$code-font-family</span><span style=color:#666>:</span> Fira Mono<span style=color:#666>,</span> Source Code Pro<span style=color:#666>,</span> Menlo<span style=color:#666>,</span> Consolas<span style=color:#666>,</span> Monaco<span style=color:#666>,</span> <span style=color:#800>monospace</span>;
</code></pre></div><p>在 <code>config/css/_custom.scss</code> 中, 你可以添加一些 CSS 样式代码以自定义样式.</p><h2 id=8-添加独立域名>8. 添加独立域名</h2><p>给部署在 GitHub Pages 上的博客添加独立域名，是早就想做的事，以前是因为没什么需求，.me域名比较贵，国内购买域名备案又比较麻烦，所以一直没做。这次选择了.top域名，买了三年才67，可以了，三年以后开始工作再考虑换.me域名，毕竟这个冷门的字段应该没人要。而且发现部署在github pages不需要备案，因为服务器不在国内。</p><h3 id=31-选购域名>3.1 选购域名</h3><p>可能很多人已经买好了域名了，你可以[跳过这部分](#GitHub 上的设置)</p><p>要想给博客绑定独立域名，首先你得拥有一个域名。得去域名注册网站购买域名，国内的域名商推荐<a href=https://wanwang.aliyun.com/>万网</a>，国外的推荐 <a href=https://www.godaddy.com/>GoDaddy</a>，因为他们分别是中国最大和世界最大的域名注册服务商。不了解的领域当然挑知名有信誉的总是没错的。</p><p>要是买<code>.me</code>域名就真的只能在GoDaddy买了，首年24，续费不知道，但是还需要购买隐私保护，这样就变成了每年60，要是工作后还负担的起，现在买这个还是算了。<code>.io</code>首年就320，更负担不起了。国内的话，<code>.com</code>，<code>.net</code>这些就不想了，基本都已经被注册了，于是选择了<code>.top</code>，一口气买了三年，一共67，而且在国内购买的好处是本身对WHOIS中的个人信息提供隐私保护。阿里云之前对域名提供的隐私保护服务已经停用了，主要是因为</p><blockquote><p>为落实<a href=https://www.icann.org/news/announcement-2018-05-22-zh>ICANN临时规范</a>要求，自2018年5月25日起阿里云WHOIS查询公开信息中将不再显示域名注册人、管理联系人和技术联系人的个人数据，包括姓名、邮箱、电话、街道地址等。</p></blockquote><p>这样域名的注册信息已得到默认保护，不再需要额外开通隐私保护。</p><p>具体选购过程大致是：<strong>搜索域名 -> 将喜欢的域名加入购物车 ->选择域名注册模板(没有的话要创建)-> 付款 -> 购买成功</strong>，实际使用还需要进行邮箱验证和实名认证，否则域名无法启用。</p><p>最为繁琐的域名备案过程可以跳过，因为博客挂载在github pages，而只有服务器在国内的网站才需要备案。</p><h3 id=32-dns解析>3.2 DNS解析</h3><p>使用CNAME别名映射域名，比设置A记录更方便，最重要的是A记录无法开启https。参数设置如下图所示。</p><p><img src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190712_1Heu1H.png alt=CNAME设置></p><p>访问网址时可能会加www前缀，因此可以设置一个二级域名解析，方法相同。</p><h3 id=33-github-上的设置>3.3 GitHub 上的设置</h3><p>到 Github <code>shuzang.github.io</code>仓库设置里，在 <code>Custom domain</code> 这里填写<code>shuzang.top</code>域名并保存。</p><p><img src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190712_1He3HP.png alt=github域名设置></p><p><code>Custom domain</code> 下方 <code>Enforce HTTPS</code> 这个选项一并勾选，Github 跟 Let’s Encrypt 有合作，如果勾选了这个选项，Let’s Encrypt 就会给你的博客签发一张 SSL 证书，免费的。</p><p><img src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190712_1HeJN8.png alt=启用HTTPS></p><p>发现上面这种方法每次提交后都需要重新填写<code>custom domin</code>字段，因此采用另一种方式，创建一个名为 <code>CNAME</code> 的文件放在<code>content</code>目录，其中的内容<strong>只</strong>写上你的域名，像这样</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>shuzang.top
</code></pre></div><p>使用hugo命令生成文件会将CNAME文件直接复制到public目录，并通过持续集成将其推送到master分支根目录。</p><p>等几分钟 (刷新 DNS 缓存)，然后在浏览器中输入<code>shuzang.top</code>，回车，不出意外看到了自己的博客。</p><h3 id=34-其他玩法>3.4 其他玩法</h3><p>除了将域名绑定给博客外博客，还可以用域名干一些别的事。</p><p>比如，<strong>使用 A 记录将 <code>mail.shuzang.me</code> 这个二级域名指向 <code>207.46.149.80</code> 就可以 “搭建” 一个 <a href=http://mail.shuzang.top/>临时邮箱</a>服务</strong> (感谢 <a href=https://moeclub.org/>萌咖 | MoeClub.org</a> 提供的服务器)</p><p>如果你还有一台拥有<strong>公网 IP</strong> 的服务器，可玩性就更高了！</p><p>如果有能力，你甚至可以拥有自己的搜索引擎</p><h2 id=9-代码高亮>9. 代码高亮</h2><p>KeepIt主题本身对代码高亮的渲染是在本地执行的，使用的是<a href=https://github.com/google/code-prettify>google code prettify</a>，高亮风格较少而且作者没提供配置选项，通过使用<code>Highlight.js</code>库可以自定义代码高亮格式<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>。</p><p>为了最大程度的保持原主题文件的代码，我们首先将主题文件夹下<code>layouts/partials/js.html</code>文件复制到Hugo项目文件夹，令其位于同样的目录，然后删除文件中的以下语句</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>{{ $prettify := resources.Get &#34;/js/prettify.min.js&#34; }}
</code></pre></div><p>之后删除<code>js.html</code>文件中所有<code>$prettify</code>字段。</p><p>复制主题文件夹<code>layouts/partials/head.html</code>文件到项目文件夹，并添加如下内容</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:green;font-weight:700>link</span> <span style=color:#b44>href</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://cdn.bootcss.com/highlight.js/9.15.10/styles/atom-one-light.min.css&#34;</span> <span style=color:#b44>rel</span><span style=color:#666>=</span><span style=color:#b44>&#34;stylesheet&#34;</span>&gt;
&lt;<span style=color:green;font-weight:700>script</span> <span style=color:#b44>src</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js&#34;</span>&gt;&lt;/<span style=color:green;font-weight:700>script</span>&gt;
&lt;<span style=color:green;font-weight:700>script</span> <span style=color:#b44>src</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://cdn.bootcss.com/highlight.js/9.15.10/languages/go.min.js&#34;</span>&gt;&lt;/<span style=color:green;font-weight:700>script</span>&gt;
&lt;<span style=color:green;font-weight:700>script</span>&gt;hljs.initHighlightingOnLoad();&lt;/<span style=color:green;font-weight:700>script</span>&gt;
</code></pre></div><p>以上代码使用了<a href=https://www.bootcdn.cn/highlight.js/>bootCDN</a>对<code>Highlight.js</code>进行加速，并额外添加了对go语言代码高亮的支持。</p><p>最后需要删除主题文件夹中的某些内容，包括</p><ol><li><p><code>assets/js/prettify.min.js</code>文件</p></li><li><p><code>assets/css/main.scss</code>的以下内容</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=color:#a2f;font-weight:700>@import</span> <span style=color:#b44>&#34;</span><span style=color:#b44>_common/_prettyprint/default.scss</span><span style=color:#b44>&#34;</span>
</code></pre></div></li></ol><p>此时代码就可以以浅色的atom格式高亮了，不过可惜的是不显示代码行数，就只能等以后再说了。</p><p>还要注意的是以后每次更新主题都要删除主题文件夹中以上两个内容。</p><h2 id=10-视频>10. 视频</h2><p>可以使用html代码直接在文章中嵌入视频，因为各视频网站一般会在分享链接中提供iframe格式的代码，以B站为例，复制如下代码放在文章中相应的位置即可</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:green;font-weight:700>iframe</span> <span style=color:#b44>src</span><span style=color:#666>=</span><span style=color:#b44>&#34;//player.bilibili.com/player.html?aid=75064361&#34;</span> <span style=color:#b44>scrolling</span><span style=color:#666>=</span><span style=color:#b44>&#34;no&#34;</span> <span style=color:#b44>border</span><span style=color:#666>=</span><span style=color:#b44>&#34;0&#34;</span> <span style=color:#b44>frameborder</span><span style=color:#666>=</span><span style=color:#b44>&#34;no&#34;</span> <span style=color:#b44>framespacing</span><span style=color:#666>=</span><span style=color:#b44>&#34;0&#34;</span> <span style=color:#b44>allowfullscreen</span><span style=color:#666>=</span><span style=color:#b44>&#34;true&#34;</span> <span style=color:#b44>style</span><span style=color:#666>=</span><span style=color:#b44>&#34;width: 100%;height: 600px;&#34;</span> &gt; &lt;/<span style=color:green;font-weight:700>iframe</span>&gt;
</code></pre></div><p>注意添加<code>style</code>字段调整高度与宽度，否则可能显示效果不会很好，上面的代码效果如下</p><iframe src="//player.bilibili.com/player.html?aid=75064361" scrolling=no border=0 frameborder=no framespacing=0 allowfullscreen style=width:100%;height:600px></iframe><p>也可以使用短代码来完成，Hugo提供了<a href=https://gohugo.io/templates/shortcode-templates/>Shortcodes</a>功能可以帮助我们定制一些语法，仍以B站视频为例，在项目根目录建立<code>/layouts/shortcodes</code>文件夹，在该文件夹内新建<code>bilibili.html</code>文件，文件内容编辑如下</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:green;font-weight:700>iframe</span> <span style=color:#b44>src</span><span style=color:#666>=</span><span style=color:#b44>&#34;//player.bilibili.com/player.html?aid={{ .Get 0 }}&#34;</span> 
        <span style=color:#b44>scrolling</span><span style=color:#666>=</span><span style=color:#b44>&#34;no&#34;</span> <span style=color:#b44>border</span><span style=color:#666>=</span><span style=color:#b44>&#34;0&#34;</span> <span style=color:#b44>frameborder</span><span style=color:#666>=</span><span style=color:#b44>&#34;no&#34;</span> <span style=color:#b44>framespacing</span><span style=color:#666>=</span><span style=color:#b44>&#34;0&#34;</span> 
        <span style=color:#b44>allowfullscreen</span><span style=color:#666>=</span><span style=color:#b44>&#34;true&#34;</span> 
        <span style=color:#b44>style</span><span style=color:#666>=</span><span style=color:#b44>&#34;width: 100%;height: 600px;&#34;</span> &gt; 
&lt;/<span style=color:green;font-weight:700>iframe</span>&gt;
</code></pre></div><p>以后在文章中添加视频就可以使用如下格式的代码，其中的参数为视频代码，可以在视频URL中找到</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>video <span style=color:#666>75064361</span>
</code></pre></div><p>使用iframe即使在本地的Typora编辑器也可以查看效果，但是代码较多，而是用shortcodes可以精简代码，但只有开启预览或将文章推送到云端才能看到，各有利弊，自己权衡。</p><p>最后还需要提一点，引入视频会导致网页加载速度大幅下滑，如非必要，最好不要引入。</p><h2 id=11-音频>11. 音频</h2><p>在文章中嵌入音频也是一个需求，尤其是歌曲，使用频率比较高，我们在这里注意使用使用 <a href=https://github.com/MoePlayer/APlayer>APlayer</a> 和 <a href=https://github.com/metowolf/MetingJS>MetingJS</a> 完成这一功能。</p><p>在<code>layouts</code>目录下的head.html文件中添加如下内容</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#080;font-style:italic>&lt;!--</span><span style=color:#080;font-style:italic> require APlayer </span><span style=color:#080;font-style:italic>--&gt;</span>
&lt;<span style=color:green;font-weight:700>link</span> <span style=color:#b44>rel</span><span style=color:#666>=</span><span style=color:#b44>&#34;stylesheet&#34;</span> <span style=color:#b44>href</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css&#34;</span>&gt;
&lt;<span style=color:green;font-weight:700>script</span> <span style=color:#b44>src</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js&#34;</span>&gt;&lt;/<span style=color:green;font-weight:700>script</span>&gt;
<span style=color:#080;font-style:italic>&lt;!--</span><span style=color:#080;font-style:italic> require MetingJS </span><span style=color:#080;font-style:italic>--&gt;</span>
&lt;<span style=color:green;font-weight:700>script</span> <span style=color:#b44>src</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js&#34;</span>&gt;&lt;/<span style=color:green;font-weight:700>script</span>&gt;
</code></pre></div><p>然后在文章中可以通过如下语句添加音频</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:green;font-weight:700>meting-js</span> <span style=color:#b44>auto</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://y.qq.com/n/yqq/song/000xRG4E4diqXD.html&#34;</span>&gt;&lt;/<span style=color:green;font-weight:700>meting-js</span>&gt;
</code></pre></div><p>播放链接可以通过浏览器从各音乐平台获取，当然，和视频一样使用iframe格式的代码嵌入也是可以的</p><p>最后，也可以使用shortcodes缩短音频代码，在<code>layouts/shortcodes</code>目录下新建audio.html文件，编辑内容如下</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:green;font-weight:700>meting-js</span> <span style=color:#b44>auto</span><span style=color:#666>=</span><span style=color:#b44>{{</span> <span>.</span><span style=color:#b44>Get</span> <span style=color:#b44>0</span> <span>}</span><span>}</span>&gt;&lt;/<span style=color:green;font-weight:700>meting-js</span>&gt;
</code></pre></div><p>在文章中就可以像下面这样使用，参数为音频网址</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>audio  <span style=color:#b44>&#34;https://y.qq.com/n/yqq/song/000xRG4E4diqXD.html&#34;</span>
</code></pre></div><h2 id=12-数学公式>12. 数学公式</h2><p>文章中使用数学公式也是一种需求，但是Hugo本身不提供对这种语法的支持，KeepIt主题也没有提供这个功能，因此需要自己添加<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>。</p><p>主要方法是在已经生成好的HTML页面中使用JavaScript来渲染LaTex形式的数学公式，因此选择了这方面最流行的库<a href=https://www.mathjax.org/>MathJax</a>。</p><p>与代码相同，数学公式也有行内(inline)和区块(block)两种，下面展示了这两种写法</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-latex data-lang=latex>When <span style=color:#b44>$</span><span style=color:#a2f>a </span><span style=color:#b8860b>\ne</span><span style=color:#a2f> </span><span style=color:#666>0</span><span style=color:#b44>$</span>, there are two solutions to `<span style=color:#b44>\(</span><span style=color:#a2f>ax</span><span style=color:#a2f>^</span><span style=color:#666>2</span><span style=color:#a2f> </span><span style=color:#666>+</span><span style=color:#a2f> bx </span><span style=color:#666>+</span><span style=color:#a2f> c </span><span style=color:#666>=</span><span style=color:#a2f> </span><span style=color:#666>0</span><span style=color:#b44>\)</span>` and they are:

<span style=color:#b44>$$</span><span style=color:#a2f>x </span><span style=color:#666>=</span><span style=color:#a2f> </span><span style=color:#a2f>{</span><span style=color:#666>-</span><span style=color:#a2f>b </span><span style=color:#b8860b>\pm</span><span style=color:#a2f> </span><span style=color:#b8860b>\sqrt</span><span style=color:#a2f>{</span><span style=color:#a2f>b</span><span style=color:#a2f>^</span><span style=color:#666>2</span><span style=color:#666>-</span><span style=color:#666>4</span><span style=color:#a2f>ac</span><span style=color:#a2f>}</span><span style=color:#a2f> </span><span style=color:#b8860b>\over</span><span style=color:#a2f> </span><span style=color:#666>2</span><span style=color:#a2f>a</span><span style=color:#a2f>}</span><span style=color:#b44>$$</span>
</code></pre></div><p>Hugo官方其实给了一个<a href=https://gohugo.io/content-management/formats/#enable-mathjax>解决办法</a>，分为三步：</p><ol><li><p>引入<code>&lt;script></code>标签</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#666>&lt;</span>script type<span style=color:#666>=</span><span style=color:#b44>&#34;text/javascript&#34;</span> src<span style=color:#666>=</span><span style=color:#b44>&#34;https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML&#34;</span><span style=color:#666>&gt;</span>
<span style=color:#666>&lt;</span><span>/</span><span>s</span><span>c</span><span>r</span><span>i</span><span>p</span><span>t</span><span>&gt;</span>
</code></pre></div><p>需要确保这段代码嵌入网站所有页面中，因此把它添加到<code>layouts/partials/head.html</code>文件中。</p></li><li><p>行内公式和特殊字符转义</p><p>第一步执行完后行内公式依然无法显示，如下划线<code>_</code>等特殊字符转义也有问题。因此需要继续添加如下代码，仍然是<code>layouts/partials/head.html</code>文件，两段代码前者做了一些配置，后者自动给<code>className</code>加<code>has-jax</code>后缀。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#666>&lt;</span>script type<span style=color:#666>=</span><span style=color:#b44>&#34;text/x-mathjax-config&#34;</span><span style=color:#666>&gt;</span>
MathJax.Hub.Config({
  tex2jax<span style=color:#666>:</span> {
    inlineMath<span style=color:#666>:</span> [[<span style=color:#b44>&#39;$&#39;</span>,<span style=color:#b44>&#39;$&#39;</span>], [<span style=color:#b44>&#39;\\(&#39;</span>,<span style=color:#b44>&#39;\\)&#39;</span>]],
    displayMath<span style=color:#666>:</span> [[<span style=color:#b44>&#39;$$&#39;</span>,<span style=color:#b44>&#39;$$&#39;</span>], [<span style=color:#b44>&#39;\[&#39;</span>,<span style=color:#b44>&#39;\]&#39;</span>]],
    processEscapes<span style=color:#666>:</span> <span style=color:#a2f;font-weight:700>true</span>,
    processEnvironments<span style=color:#666>:</span> <span style=color:#a2f;font-weight:700>true</span>,
    skipTags<span style=color:#666>:</span> [<span style=color:#b44>&#39;script&#39;</span>, <span style=color:#b44>&#39;noscript&#39;</span>, <span style=color:#b44>&#39;style&#39;</span>, <span style=color:#b44>&#39;textarea&#39;</span>, <span style=color:#b44>&#39;pre&#39;</span>],
    TeX<span style=color:#666>:</span> { equationNumbers<span style=color:#666>:</span> { autoNumber<span style=color:#666>:</span> <span style=color:#b44>&#34;AMS&#34;</span> },
         extensions<span style=color:#666>:</span> [<span style=color:#b44>&#34;AMSmath.js&#34;</span>, <span style=color:#b44>&#34;AMSsymbols.js&#34;</span>] }
  }
});
<span style=color:#666>&lt;</span><span>/</span><span>s</span><span>c</span><span>r</span><span>i</span><span>p</span><span>t</span><span>&gt;</span>
   
<span style=color:#666>&lt;</span>script type<span style=color:#666>=</span><span style=color:#b44>&#34;text/x-mathjax-config&#34;</span><span style=color:#666>&gt;</span>
  MathJax.Hub.Queue(<span style=color:#a2f;font-weight:700>function</span>() {
    <span style=color:#080;font-style:italic>// Fix &lt;code&gt; tags after MathJax finishes running. This is a
</span><span style=color:#080;font-style:italic></span>    <span style=color:#080;font-style:italic>// hack to overcome a shortcoming of Markdown. Discussion at
</span><span style=color:#080;font-style:italic></span>    <span style=color:#080;font-style:italic>// https://github.com/mojombo/jekyll/issues/199
</span><span style=color:#080;font-style:italic></span>    <span style=color:#a2f;font-weight:700>var</span> all <span style=color:#666>=</span> MathJax.Hub.getAllJax(), i;
    <span style=color:#a2f;font-weight:700>for</span>(i <span style=color:#666>=</span> <span style=color:#666>0</span>; i <span style=color:#666>&lt;</span> all.length; i <span style=color:#666>+=</span> <span style=color:#666>1</span>) {
        all[i].SourceElement().parentNode.className <span style=color:#666>+=</span> <span style=color:#b44>&#39; has-jax&#39;</span>;
    }
});
<span style=color:#666>&lt;</span><span>/</span><span>s</span><span>c</span><span>r</span><span>i</span><span>p</span><span>t</span><span>&gt;</span>
</code></pre></div></li><li><p>CSS调整</p><p>最后还需要在CSS中对这种特殊的MathJax进行样式处理，否则行内公式的显示会很奇怪。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=color:green;font-weight:700>code</span>.<span style=color:#00f>has-jax</span> {
    <span style=color:#a2f;font-weight:700>font</span>: <span style=color:#a2f;font-weight:700>inherit</span>;
    <span style=color:#a2f;font-weight:700>font-size</span>: <span style=color:#666>100</span><span style=color:#0b0;font-weight:700>%</span>;
    <span style=color:#a2f;font-weight:700>background</span>: <span style=color:#a2f;font-weight:700>inherit</span>;
    <span style=color:#a2f;font-weight:700>border</span>: <span style=color:#a2f;font-weight:700>inherit</span>;
    <span style=color:#a2f;font-weight:700>color</span>: <span style=color:#666>#515151</span>;
}
</code></pre></div></li></ol><p>然后以上方法步骤繁琐最后还不一定起作用，因此采用把所有修改写成一个<code>layouts/partials/mathjax.html</code>文件的方法，把官方提到的三处修改合并成一个partial，然后把MathJax的CDN修改到国内。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:green;font-weight:700>script</span> <span style=color:#b44>type</span><span style=color:#666>=</span><span style=color:#b44>&#34;text/javascript&#34;</span>
        <span style=color:#b44>async</span>
        <span style=color:#b44>src</span><span style=color:#666>=</span><span style=color:#b44>&#34;https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML&#34;</span>&gt;
MathJax.Hub.Config({
  tex2jax<span style=color:#666>:</span> {
    inlineMath<span style=color:#666>:</span> [[<span style=color:#b44>&#39;$&#39;</span>,<span style=color:#b44>&#39;$&#39;</span>], [<span style=color:#b44>&#39;\\(&#39;</span>,<span style=color:#b44>&#39;\\)&#39;</span>]],
    displayMath<span style=color:#666>:</span> [[<span style=color:#b44>&#39;$$&#39;</span>,<span style=color:#b44>&#39;$$&#39;</span>], [<span style=color:#b44>&#39;\[&#39;</span>,<span style=color:#b44>&#39;\]&#39;</span>]],
    processEscapes<span style=color:#666>:</span> <span style=color:#a2f;font-weight:700>true</span>,
    processEnvironments<span style=color:#666>:</span> <span style=color:#a2f;font-weight:700>true</span>,
    skipTags<span style=color:#666>:</span> [<span style=color:#b44>&#39;script&#39;</span>, <span style=color:#b44>&#39;noscript&#39;</span>, <span style=color:#b44>&#39;style&#39;</span>, <span style=color:#b44>&#39;textarea&#39;</span>, <span style=color:#b44>&#39;pre&#39;</span>],
    TeX<span style=color:#666>:</span> { equationNumbers<span style=color:#666>:</span> { autoNumber<span style=color:#666>:</span> <span style=color:#b44>&#34;AMS&#34;</span> },
         extensions<span style=color:#666>:</span> [<span style=color:#b44>&#34;AMSmath.js&#34;</span>, <span style=color:#b44>&#34;AMSsymbols.js&#34;</span>] }
  }
});

MathJax.Hub.Queue(<span style=color:#a2f;font-weight:700>function</span>() {
    <span style=color:#080;font-style:italic>// Fix &lt;code&gt; tags after MathJax finishes running. This is a
</span><span style=color:#080;font-style:italic></span>    <span style=color:#080;font-style:italic>// hack to overcome a shortcoming of Markdown. Discussion at
</span><span style=color:#080;font-style:italic></span>    <span style=color:#080;font-style:italic>// https://github.com/mojombo/jekyll/issues/199
</span><span style=color:#080;font-style:italic></span>    <span style=color:#a2f;font-weight:700>var</span> all <span style=color:#666>=</span> MathJax.Hub.getAllJax(), i;
    <span style=color:#a2f;font-weight:700>for</span>(i <span style=color:#666>=</span> <span style=color:#666>0</span>; i <span style=color:#666>&lt;</span> all.length; i <span style=color:#666>+=</span> <span style=color:#666>1</span>) {
        all[i].SourceElement().parentNode.className <span style=color:#666>+=</span> <span style=color:#b44>&#39; has-jax&#39;</span>;
    }
});
&lt;/<span style=color:green;font-weight:700>script</span>&gt;

&lt;<span style=color:green;font-weight:700>style</span>&gt;
<span style=color:green;font-weight:700>code</span>.<span style=color:#00f>has-jax</span> {
    <span style=color:#a2f;font-weight:700>font</span>: <span style=color:#a2f;font-weight:700>inherit</span>;
    <span style=color:#a2f;font-weight:700>font-size</span>: <span style=color:#666>100</span><span style=color:#0b0;font-weight:700>%</span>;
    <span style=color:#a2f;font-weight:700>background</span>: <span style=color:#a2f;font-weight:700>inherit</span>;
    <span style=color:#a2f;font-weight:700>border</span>: <span style=color:#a2f;font-weight:700>inherit</span>;
    <span style=color:#a2f;font-weight:700>color</span>: <span style=color:#666>#515151</span>;
}
&lt;/<span style=color:green;font-weight:700>style</span>&gt;
</code></pre></div><p>最后把以上partial模板添加到<code>head.html</code>模板中</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>{{ partial &#34;mathjax.html&#34; . }}
</code></pre></div><p>但直接修改主题中的文件并不合适，因为原作者可能会进行一定的更新（对我这样的半吊子很依赖作者对主题的更新），好在Hugo对文件的寻找是有优先级的，会首先在项目文件中寻找相应的渲染模板，然后才去主题文件夹寻找，因此将<code>layouts/partials/mathjax.html</code>和<code>layouts/partials/head.html</code>这两个修改后的文件复制到Hugo项目的相同位置，此时就可以直接反馈在页面上了。此时在hugo项目根目录查看目录结构如下：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ls
archetypes/  content/  layouts/    static/
config.toml  data/     resources/  themes/

$ find layouts -type f | xargs ls -l
-rw-r--r-- <span style=color:#666>1</span> lylw1 <span style=color:#666>197609</span> <span style=color:#666>2679</span> 11月 <span style=color:#666>12</span> 15:51 layouts/partials/head.html
-rw-r--r-- <span style=color:#666>1</span> lylw1 <span style=color:#666>197609</span> <span style=color:#666>1056</span> 11月 <span style=color:#666>12</span> 15:51 layouts/partials/mathjax.html

</code></pre></div><h2 id=待完成>待完成</h2><ul><li>RSS</li><li>站内搜索</li><li>CDN，可参考<a href=https://mogeko.me/2019/056/>为博客添加免费的 CDN (Cloudflare)</a></li><li>SEO</li></ul><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p><a href=https://gohugo.io/templates/menu-templates/>菜单栏添加页面</a> <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p><a href=https://discourse.gohugo.io/t/ordering-menu-items/1841>菜单栏标题排序</a> <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p><a href=https://note.qidong.name/2017/06/24/hugo-highlight>Hugo中添加代码高亮支持</a> <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><footer class=post-footer><div class=post-tags><a href=/tags/hugo rel=tag title=Hugo>#Hugo#</a></div><div class=addthis_inline_share_toolbox></div><div class=post-nav><div class=article-copyright><div class=article-copyright-info><p><span>声明：</span>hugo搭建个人博客3-进阶设置</p><p><span>链接：</span>https://shuzang.github.io/2019/07/hugo-blog-advanced-setup/</p><p><span>作者：</span>书藏</p><p><span>声明： </span>本博客文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank style=text-decoration:underline>CC BY-NC-SA 3.0</a>许可协议，转载请注明出处！</p></div></div><div class=clear></div></div><div class=reward-qr-info><div>创作实属不易，如有帮助，那就打赏博主些许茶钱吧 ^_^</div><button id=rewardButton disable=enable onclick="var qr=document.getElementById('QR');if(qr.style.display==='none'){qr.style.display='block';}else{qr.style.display='none'}">
<span>赏</span></button><div id=QR style=display:none><div id=wechat style=display:inline-block><img id=wechat_qr src=/img/wechat-pay.png alt="WeChat Pay"><p>微信打赏</p></div><div id=alipay style=display:inline-block><img id=alipay_qr src=/img/ali-pay.png alt=Alipay><p>支付宝打赏</p></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=https://shuzang.github.io/2019/07/research-proposal-title-select/ rel=next title=研究记录3-开题确定题目><i class="fa fa-chevron-left"></i>研究记录3-开题确定题目</a></div><div class="post-nav-prev post-nav-item"><a href=https://shuzang.github.io/2019/07/%E7%A7%91%E5%AD%A6%E7%B2%BE%E7%A5%9E%E4%B8%8E%E4%BA%BA%E6%96%87%E7%B4%A0%E5%85%BB/ rel=prev title=科学精神与人文素养>科学精神与人文素养
<i class="fa fa-chevron-right"></i></a></div></div><div id=wcomments></div></footer></article></section></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target=post-toc-wrap>文章目录</li><li class=sidebar-nav-overview data-target=site-overview>站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src=/images/avatar.png alt=书藏><p class=site-author-name itemprop=name>书藏</p><p class="site-description motion-element" itemprop=description></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/post/><span class=site-state-item-count>334</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>23</span>
<span class=site-state-item-name>标签</span></a></div></nav><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/shuzang/ target=_blank title=GitHub><i class="fa fa-fw fa-github"></i>GitHub</a></span>
<span class=links-of-author-item><a href="https://www.douban.com/people/159916010/?_i=9150521DKS5bK1" target=_blank title=豆瓣><i class="fa fa-fw fa-film"></i>豆瓣</a></span></div><div class="tagcloud-of-blogroll motion-element tagcloud-of-blogroll-inline"><div class=tagcloud-of-blogroll-title><i class="fa fa-fw fa-tags"></i>标签云</div><ul class=tagcloud-of-blogroll-list><li class=tagcloud-of-blogroll-item><a href=/tags/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0>论文笔记</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E4%B9%A6%E8%97%8F%E7%9A%84%E7%94%9F%E6%B4%BB%E5%91%A8%E5%88%8A>书藏的生活周刊</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E7%A7%91%E7%A0%94%E8%AE%B0%E5%BD%95>科研记录</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/go%E8%AF%AD%E6%B3%95>Go语法</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80>计算机基础</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E6%9D%82%E8%B0%88>杂谈</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E5%8C%BA%E5%9D%97%E9%93%BE>区块链</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95>数据结构与算法</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E7%94%9F%E6%B4%BB%E6%8A%80%E8%83%BD>生活技能</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/go%E5%AE%9E%E6%88%98>Go实战</a></li></ul></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class=post-toc><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#1-添加菜单栏页面>1. 添加菜单栏页面</a></li><li><a href=#2-字数统计>2. 字数统计</a></li><li><a href=#2-开启评论>2. 开启评论</a></li><li><a href=#3-打赏>3. 打赏</a></li><li><a href=#4-英文url>4. 英文URL</a></li><li><a href=#5-图片插入>5. 图片插入</a></li><li><a href=#6-自定义样式>6. 自定义样式</a></li><li><a href=#8-添加独立域名>8. 添加独立域名</a><ul><li><a href=#31-选购域名>3.1 选购域名</a></li><li><a href=#32-dns解析>3.2 DNS解析</a></li><li><a href=#33-github-上的设置>3.3 GitHub 上的设置</a></li><li><a href=#34-其他玩法>3.4 其他玩法</a></li></ul></li><li><a href=#9-代码高亮>9. 代码高亮</a></li><li><a href=#10-视频>10. 视频</a></li><li><a href=#11-音频>11. 音频</a></li><li><a href=#12-数学公式>12. 数学公式</a></li><li><a href=#待完成>待完成</a></li></ul></nav></div></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright><span class=copyright-year>&copy; 2018 - 2022</span>
<span class=with-love><i class="fa fa-heart"></i></span><span class=copyright-author>书藏的博客</span></div><div class=powered-info><span class=powered-by>Powered by - <a class=powered-link href=//gohugo.io target=_blank title=hugo>Hugo v0.63.2</a></span>
<span class=separator-line>/</span>
<span class=theme-info>Theme by - <a class=powered-link href=//github.com/elkan1788/hugo-theme-next target=_blank>NexT</a></span></div><div class=vistor-info><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span class=site-uv><i class="fa fa-user"></i><span class=busuanzi-value id=busuanzi_value_site_uv></span></span><span class=separator-line>/</span>
<span class=site-pv><i class="fa fa-eye"></i><span class=busuanzi-value id=busuanzi_value_site_pv></span></span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i><span id=scrollpercent><span>0</span>%</span></div></div><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.min.js></script><script type=text/javascript src=/js/search.js></script><script type=text/javascript src=/js/affix.js></script><script type=text/javascript src=/js/scrollspy.js></script><script type=text/javascript>function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');var trident=ua.indexOf('Trident/');var edge=ua.indexOf('Edge/');if(msie>0||trident>0||edge>0){return-1;}
return 1;}
function getCntViewHeight(){var docHeight=$('#content').height(),winHeight=$(window).height(),cntViewHeight=(docHeight>winHeight)?(docHeight-winHeight):($(document).height()-winHeight);return cntViewHeight;}
function getScrollbarWidth(){var $div=$('<div />').addClass('scrollbar-measure').prependTo('body');var div=$div[0];var scrollbarWidth=div.offsetWidth-div.clientWidth;$div.remove();return scrollbarWidth;}
function registerBackTop(){var THRESHOLD=50;var $top=$('.back-to-top');$(window).on('scroll',function(){$top.toggleClass('back-to-top-on',window.pageYOffset>THRESHOLD);var scrollTop=$(window).scrollTop();var cntViewHeight=getCntViewHeight();var scrollPercent=(scrollTop)/(cntViewHeight);var scrollPercentRounded=Math.round(scrollPercent*100);var scrollPercentMaxed=(scrollPercentRounded>100)?100:scrollPercentRounded;$('#scrollpercent>span').html(scrollPercentMaxed);});$top.on('click',function(){$("html,body").animate({scrollTop:0,screenLeft:0,},800);});}
function initScrollSpy(){var tocSelector='.post-toc';var $tocElement=$(tocSelector);var activeCurrentSelector='.active-current';$tocElement.on('activate.bs.scrollspy',function(){var $currentActiveElement=$(tocSelector+' .active').last();removeCurrentActiveClass();$currentActiveElement.addClass('active-current');}).on('clear.bs.scrollspy',removeCurrentActiveClass);$('body').scrollspy({target:tocSelector});function removeCurrentActiveClass(){$(tocSelector+' '+activeCurrentSelector).removeClass(activeCurrentSelector.substring(1));}}
function initAffix(){var headerHeight=$('.header-inner').height();var footerOffset=parseInt($('.main').css('padding-bottom'),10);var sidebarTop=headerHeight+10;$('.sidebar-inner').affix({offset:{top:sidebarTop,bottom:footerOffset}});$(document).on('affixed.bs.affix',function(){updateTOCHeight(document.body.clientHeight-100);});}
function initTOCDimension(){var updateTOCHeightTimer;$(window).on('resize',function(){updateTOCHeightTimer&&clearTimeout(updateTOCHeightTimer);updateTOCHeightTimer=setTimeout(function(){var tocWrapperHeight=document.body.clientHeight-100;updateTOCHeight(tocWrapperHeight);},0);});updateTOCHeight(document.body.clientHeight-100);var scrollbarWidth=getScrollbarWidth();$('.post-toc').css('width','calc(100% + '+scrollbarWidth+'px)');}
function updateTOCHeight(height){height=height||'auto';$('.post-toc').css('max-height',height);}
$(function(){var sidebarTop=$('.header-inner').height()+10;$('#sidebar').css({'margin-top':sidebarTop}).show();var sidebarMt=parseInt($('#sidebar').css('margin-top'));var sidebarInHeight=parseInt($('.sidebar-inner').css('height'));var sideHeight=sidebarMt+sidebarInHeight;var contentHeight=$('.content-wrap').height();if(contentHeight<sideHeight){$('.content-wrap').css('min-height',sideHeight);}
$('.site-nav-toggle').on('click',function(){var $siteNav=$('.site-nav');var $toggleLine=$('.toggle');var ON_CLASS_NAME='site-nav-on';var CLOSE_CLASS_NAME='toggle-close';var isSiteNavOn=$siteNav.hasClass(ON_CLASS_NAME);var animateAction=isSiteNavOn?'slideUp':'slideDown';var animateCallback=isSiteNavOn?'removeClass':'addClass';$siteNav.stop()[animateAction]('normal',function(){$siteNav[animateCallback](ON_CLASS_NAME);$toggleLine[animateCallback](CLOSE_CLASS_NAME);});});registerBackTop();initScrollSpy();initAffix();initTOCDimension();$('.sidebar-nav-toc').click(function(){$(this).addClass('sidebar-nav-active');$(this).next().removeClass('sidebar-nav-active');$('.'+$(this).next().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});$('.sidebar-nav-overview').click(function(){$(this).addClass('sidebar-nav-active');$(this).prev().removeClass('sidebar-nav-active');$('.'+$(this).prev().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});});</script><script src=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.js></script><script type=text/javascript>$(function(){$('.post-body').viewer();});</script><script type=text/javascript>$(function(){if(detectIE()>0){$.getScript(document.location.protocol+'//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js',function(){new Waline({el:'#wcomments',visitor:true,avatar:'wavatar',avatarCDN:'https://sdn.geekzu.org/avatar/',avatarForce:!1,wordLimit:'200',placeholder:' 欢迎留下您的宝贵建议，请填写您的昵称和邮箱便于后续交流. ^_^ ',requiredFields:['nick','mail'],serverURL:"Your WalineSerURL",lang:"zh-cn"});});}else{$('#wcomments').html('抱歉，Waline插件不支持IE或Edge，建议使用Chrome浏览器。');}});</script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=Your%20AddthisId"></script><script>(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js';}
else{bp.src='http://push.zhanzhang.baidu.com/push.js';}
var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script></body></html>