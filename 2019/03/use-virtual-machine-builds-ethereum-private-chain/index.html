<!doctype html><html lang=zh-cn dir=content/zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=content-security-policy content="upgrade-insecure-requests"><title>以太坊开发1-虚拟机搭建以太坊私链 - 书藏的博客</title><meta name=keywords content="博客,程序员,区块链，思考,读书,笔记,生活,电影,旅游,"><meta name=author content="书藏"><meta property="og:title" content="以太坊开发1-虚拟机搭建以太坊私链"><meta property="og:site_name" content="书藏的博客"><meta property="og:image" content="/img/avatar.png"><meta name=title content="以太坊开发1-虚拟机搭建以太坊私链 - 书藏的博客"><meta name=description content="书藏的个人博客，记录学习的东西，以月刊记录生活"><link rel="shortcut icon" href=/img/favicon.ico><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><link href=//cdn.bootcdn.net/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css rel=stylesheet type=text/css><link href=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.css rel=stylesheet><link href=/css/main.css rel=stylesheet type=text/css><link href=/css/syntax.css rel=stylesheet type=text/css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-209130979-1"></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-209130979-1 ');</script></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-hans><div class="container one-collumn sidebar-position-left page-home"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle role=button style=opacity:1;top:0><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><div class=multi-lang-switch><i class="fa fa-fw fa-language" style=margin-right:5px></i><a class=lang-link id=zh-cn href=#>中文</a></div><div class=custom-logo-site-title><a href=/ class=brand rel=start><span class=logo-line-before><i></i></span><span class=site-title>书藏的博客</span>
<span class=logo-line-after><i></i></span></a></div><p class=site-subtitle>凡心所向，素履以往</p></div><div class=site-nav-right><div class="toggle popup-trigger" style=opacity:1;top:0><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul id=menu class=menu><li class=menu-item><a href=/ rel=section><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class=menu-item><a href=/post rel=section><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class=menu-item><a href=/about.html rel=section><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于我</a></li><li class=menu-item><a href=/404.html rel=section><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益404</a></li><li class="menu-item menu-item-search"><a href=javascript:; class=popup-trigger><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class=site-search><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class=search-icon><i class="fa fa-search"></i></span><span class=popup-btn-close><i class="fa fa-times-circle"></i></span><div class=local-search-input-wrapper><input autocomplete=off placeholder=搜索关键字... spellcheck=false type=text id=local-search-input autocapitalize=none autocorrect=off></div></div><div id=local-search-result></div></div></div></nav></div></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><section id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://shuzang.github.io/2019/03/use-virtual-machine-builds-ethereum-private-chain/ itemprop=url>以太坊开发1-虚拟机搭建以太坊私链</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>时间：</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2019-03-07">2019-03-07</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>分类：</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/categories/%E7%A0%94%E7%A9%B6%E7%94%9F%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF itemprop=url rel=index style=text-decoration:underline><span itemprop=name>研究生的区块链学习之路</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>字数：</span>
<span class=leancloud-world-count>5700 字</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>阅读：</span>
<span class=leancloud-view-count>12分钟</span></span>
<span id=/2019/03/use-virtual-machine-builds-ethereum-private-chain/ class=leancloud_visitors data-flag-title=以太坊开发1-虚拟机搭建以太坊私链>|
<i class="fa fa-binoculars fa-fw"></i><span class=post-meta-item-text>阅读次数：</span>
<span class=leancloud-visitors-count></span></span></div></header><div class=post-body itemprop=articleBody><h2 id=一单虚拟机>一、单虚拟机</h2><p>最简单的方式是使用一个虚拟机，这也是在条件有限的情况下的最好选择。方法是在一台虚拟机上启用多个终端，每个终端使用不同的端口通信。步骤如下</p><h3 id=1-创建节点文件>1. 创建节点文件</h3><p>在<code>~Desktop</code>路径下创建NodeA、NodeB和NodeC三个文件夹，代表三个节点。在三个文件夹中分别创建<code>genesis.json</code>文件</p><h3 id=2-初始化创世区块>2. 初始化创世区块</h3><p>分别执行<code>geth init</code>命令初始化创世区块</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ geth --datadir ~/Desktop/NodeA/dataA init genesis.json
$ geth --datadir ~/Desktop/NodeB/dataB init genesis.json
$ geth --datadir ~/Desktip/NodeC/dataC init genesis.json
</code></pre></div><h3 id=3-分别启动三个节点>3. 分别启动三个节点</h3><p>启动NodeA</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ geth --datadir ~/Desktop/NodeA/dataA --networkid <span style=color:#666>22</span> --nodiscover console
</code></pre></div><p>默认的端口是30303，因为三个节点在同一个操作系统中，所以接下来启动其它两个节点时我们要指定使用其它的接口</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ geth --datadir ~/Desktop/NodeA/dataB --port <span style=color:#666>30304</span> --networkid <span style=color:#666>22</span> --nodiscover console
$ geth --datadir ~/Desktop/NodeA/dataC --port <span style=color:#666>30305</span> --networkid <span style=color:#666>22</span> --nodiscover console
</code></pre></div><h3 id=4-连接各节点>4. 连接各节点</h3><p>这里就使用<code>admin.addPeers</code>连接各节点就可以了。</p><h2 id=二多虚拟机快速搭建>二、多虚拟机快速搭建</h2><p>最理想的方式是使用多台电脑，但是一般情况下实验条件不足，不过在电脑性能足够的情况下，可以开启多台虚拟机模拟这样的环境，这里的示例使用三台Ubuntu18.04 LTS系统的虚拟机。</p><p>在走了一遍完整搭建流程后，精简不需要的步骤，将快速搭建的过程总结如下，如果想要查看详细的步骤和描述信息，请看第三部分。省略的步骤包括</p><ul><li>更新软件源</li><li>配置主机名</li><li>配置地址解析</li><li>同步时间</li><li>配置Golang环境</li><li>下载编译以太坊源码</li></ul><h3 id=正式搭建过程>正式搭建过程</h3><ol><li><p>安装网络工具</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo apt-get install -y net-tools
</code></pre></div></li><li><p>安装geth</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo add-apt-repository -y ppa:ethereum/ethereum
$ sudo apt-get update
$ sudo apt-get install ethereum
$ geth --help
</code></pre></div><p>详细过程可以查看<a href=https://ethereum.github.io/go-ethereum/install/>Installing Go Ethereum</a></p></li><li><p>创建创世区块文件</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mkdir ~/nodeA
$ <span style=color:#a2f>cd</span> ~/nodeA
$ touch genesis.json
</code></pre></div></li><li><p>编辑<code>genesis.json</code>文件内容如下</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#666>{</span>
<span style=color:#b44>&#34;config&#34;</span>: <span style=color:#666>{</span>
       <span style=color:#b44>&#34;chainId&#34;</span>: 72,
       <span style=color:#b44>&#34;homesteadBlock&#34;</span>: 0,
       <span style=color:#b44>&#34;eip155Block&#34;</span>: 0,
       <span style=color:#b44>&#34;eip158Block&#34;</span>: <span style=color:#666>0</span>
   <span style=color:#666>}</span>,
 <span style=color:#b44>&#34;alloc&#34;</span>      : <span style=color:#666>{</span><span style=color:#666>}</span>,
 <span style=color:#b44>&#34;coinbase&#34;</span>   : <span style=color:#b44>&#34;0x0000000000000000000000000000000000000000&#34;</span>,
 <span style=color:#b44>&#34;difficulty&#34;</span> : <span style=color:#b44>&#34;0x40&#34;</span>,
 <span style=color:#b44>&#34;extraData&#34;</span>  : <span style=color:#b44>&#34;&#34;</span>,
 <span style=color:#b44>&#34;gasLimit&#34;</span>   : <span style=color:#b44>&#34;0x2fefd8&#34;</span>,
 <span style=color:#b44>&#34;nonce&#34;</span>      : <span style=color:#b44>&#34;0x0000000000000000&#34;</span>,
 <span style=color:#b44>&#34;mixhash&#34;</span>    : <span style=color:#b44>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
 <span style=color:#b44>&#34;parentHash&#34;</span> :<span style=color:#b44>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
 <span style=color:#b44>&#34;timestamp&#34;</span>  : <span style=color:#b44>&#34;0x00&#34;</span>
<span style=color:#666>}</span>
</code></pre></div><p>之后克隆得到三个虚拟机，作为区块链的三个节点</p></li><li><p>创建data文件夹供存储区块链数据</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mkdir ~/nodeA/data &amp; <span style=color:#a2f>cd</span> ~/nodeA
</code></pre></div></li><li><p>初始化创世区块</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>geth --datadir data/ init genesis.json
</code></pre></div></li><li><p>启动网络</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ geth --datadir data/ --networkid <span style=color:#666>72</span> --nodiscover console
...
Welcome to the Geth JavaScript console!
</code></pre></div></li><li><p>获取节点信息</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; admin.nodeInfo.enode
</code></pre></div><p>分别在三个节点执行上述命令，得到的三个节点的信息为：</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>NodeA: <span style=color:#b44>&#34;enode://d0d6a32cacb349c8f8c92372dc3a1e118384720636519a46c14067a3b62f6cfa8549a8766ade0f91790ebdadfb44341e03c50a171b714070527be96ed037707e@[::]:30303?discport=0&#34;</span>
NodeB: <span style=color:#b44>&#34;enode://d9fc148c9808fbfee7954bd3324bfdff42777de7d2545ac3c2357f05939dbd8ee153cd32320a05f4dbf18138007f743f3a2097b62e71c3c47bb3cf1559dd1328@[::]:30303?discport=0&#34;</span>
NodeC: <span style=color:#b44>&#34;enode://246782d2429f4697e18009505989ed82c2c0a664aab96ed80b96e28be42b6d9e2d11b27806ea43e46fddfcb3e9a41e9df4889636f51e3dadc0c937b0735d0bdc@[::]:30303?discport=0&#34;</span>
</code></pre></div></li><li><p>在NodeA执行下列命令，将NodeB加入网络，NodeC同理</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt;admin.addPeer<span style=color:#666>(</span><span style=color:#b44>&#34;enode://d9fc148c9808fbfee7954bd3324bfdff42777de7d2545ac3c2357f05939dbd8ee153cd32320a05f4dbf18138007f743f3a2097b62e71c3c47bb3cf1559dd1328@[::]:30303&#34;</span><span style=color:#666>)</span>
</code></pre></div><p>将 [::] 修改为正确节点的 IP 地址，是之前用ifconfig命令查询并记录的本地地址，不支持DNS解析的域名地址，只支持点分十进制格式的IP地址。删除` ?discport=0</p></li><li><p>查看节点连接信息</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; admin.peers
</code></pre></div><p>节点关机后，会自动被删除，节点重新启动后，会自动加入节点集群, 但是如果所有节点全部断掉，则需要重新添加。</p></li><li><p>转账和挖矿测试查看下面的详细搭建过程</p></li></ol><h3 id=补充说明>补充说明</h3><ol><li><p><code>genesis.json</code>文件的相关说明可参见<a href=https://shuzang.github.io/2019/%E4%BB%A5%E5%A4%AA%E5%9D%8A-%E5%88%9B%E4%B8%96%E5%8C%BA%E5%9D%97%E6%96%87%E4%BB%B6genesis.json/>以太坊-创世区块文件genesis.json</a></p></li><li><p><code>geth</code>命令的参数说明参见<a href=https://shuzang.github.io/2019/%E4%BB%A5%E5%A4%AA%E5%9D%8A-geth%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/>以太坊-geth命令参数说明</a></p></li><li><p>本文后半部分以<code>></code>开头的命令是控制台命令，这是一个以太坊提供的交互式的JavaScript环境，可以在该环境中进行命令或者代码的执行操作，具体内容参见<a href=https://shuzang.github.io/2019/%E4%BB%A5%E5%A4%AA%E5%9D%8A-geth-console%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/>以太坊-Geth Console命令详解</a></p></li><li><p>本文使用了<code>admin.addPeer()</code>命令进行节点连接，但实际上还有其它方式，具体每种方式的使用参见<a href=https://shuzang.github.io/2019/%E4%BB%A5%E5%A4%AA%E5%9D%8A-%E8%8A%82%E7%82%B9%E8%BF%9E%E6%8E%A5%E5%88%B0%E7%BD%91%E7%BB%9C%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/>以太坊-节点连接到网络的几种方式</a></p></li><li><p>geth命令和控制台命令有时候能实现同样的功能，比如</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ geth --datadir data/ account new
</code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; personal.newAccount<span style=color:#666>(</span><span style=color:#666>)</span>
</code></pre></div><p>两条命令均是实现创建新账户的功能</p></li><li><p>第4条所述节点连接方式中有一种是实现创建<code>static-nodes.json</code>文件用于之后的节点识别，但该方式需要账户地址，故只能使用geth命令创建新账户，而本文所述方式可以在节点连接后，再在控制台下创建账户用于转账和挖矿的操作。</p></li></ol><h2 id=三多虚拟机详细过程>三、多虚拟机详细过程</h2><p>主要内容来自 <a href=https://blog.51cto.com/clovemfong/2280872>https://blog.51cto.com/clovemfong/2280872</a></p><p>使用了多个虚拟机搭建，每个虚拟机代表一个区块链节点。自编译了以太坊源码，并且由于区块链的特性，对Linux的时间做了一定的配置，同时为了多个节点间的连接，对IP地址做了配置处理。以上这些不是必须的，但能让我们思路清晰，明白构建一个区块链应该保证什么条件。</p><h3 id=1-配置操作系统环境>1. 配置操作系统环境</h3><p>本文的操作环境是在虚拟机上完成，共计三台虚拟机 (配置尽量高上去，如下这个配置挖矿太耗时，这里的配置主要指内存和CPU的核，因为以太坊的挖矿算法Ethash主要和内存有关，而CPU的核多一点挖矿时可以多开几个线程)</p><table><thead><tr><th>主机名</th><th>IP 地址</th><th>操作系统</th><th>内存 / GB</th><th>CPU / 核</th></tr></thead><tbody><tr><td>nodeA.shuzang.com</td><td>172.16.222.189</td><td>Ubuntu18.04 LTS</td><td>2</td><td>2</td></tr><tr><td>nodeB.shuzang.com</td><td>172.16.222.190</td><td>Ubuntu18.04 LTS</td><td>2</td><td>2</td></tr><tr><td>nodeC.shuzang.com</td><td>172.16.222.191</td><td>Ubuntu18.04 LTS</td><td>2</td><td>2</td></tr></tbody></table><blockquote><p>Q：linux下设置主机名的时候，为什么都要求设置成：name.domain.com这种域名的样式.</p><p>A：因为linux等类unix系统都是为网络应用而开发的，主机的性能可以不需要很强大，只需要能够登录到服务器（也就是加入某个域），就可以利用服务器的资源，因此安装系统时如果主机是在某个域里，设置域名就表明该主机是这个域里的一员，通过合法的帐号和密码就可以连接登录到域服务器。如果是单机或者个人家庭网络，域名就可以随便设置了</p></blockquote><p>注1：以 nodeA 为例进行相关配置，其他节点配置操作相同</p><p>注2：IP地址一栏应在虚拟机创建好后用ifconfig命令查看并记录</p><h4 id=11-更新软件源>1.1 更新软件源</h4><p>根据自己需要选择是否需要更换软件源，此处用的是原生的即可。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo apt-get  update
</code></pre></div><h4 id=12-安装相关工具>1.2 安装相关工具</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get  install vim openssh-server ntp ntpdate make gcc net-tools  -y
</code></pre></div><h4 id=13-配置主机名>1.3 配置主机名</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo hostname nodeA.shuzang.com
</code></pre></div><h4 id=14-配置地址解析>1.4 配置地址解析</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ vim /etc/hosts
127.0.0.1       localhost
172.16.222.189  nodeA.shuzang.com
172.16.222.190  nodeB.shuzang.com
172.16.222.191  nodeC.shuzang.com
</code></pre></div><p>hostname &ndash;fqdn 验证</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ hostname -f        
nodeA.shuzang.com
</code></pre></div><h4 id=15-同步时间>1.5 同步时间</h4><p>修改时区</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo timedatectl set-timezone <span style=color:#b44>&#34;Asia/Shanghai&#34;</span> 
</code></pre></div><p>手动同步</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ntpdate time1.aliyun.com    
</code></pre></div><p>同步硬件时间</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo hwclock  -w <span style=color:#080;font-style:italic># 系统时间同步至硬件</span>
</code></pre></div><p>手动设置完毕后，再通过如下方式进行 ntp 服务的配置，可以选择现有或者自建的时间服务器</p><p>测试连通性</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ntpdate -q time1.aliyun.com 
server 203.107.6.88, stratum 2, offset 0.050751, delay 0.06232
<span style=color:#666>22</span> Sep 21:04:36 ntpdate<span style=color:#666>[</span>8082<span style=color:#666>]</span>: adjust <span style=color:#a2f>time</span> server 203.107.6.88 offset 0.050751 sec 
</code></pre></div><p>修改配置文件</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo cp /etc/ntp.conf  /etc/ntp.conf_shuzang_201809231208 <span style=color:#080;font-style:italic>#备份配置文件</span>
$ sudo vim /etc/ntp.conf //修改配置文件
</code></pre></div><p>修改信息如下</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#080;font-style:italic># Use servers from the NTP Pool Project. Approved by Ubuntu Technical Board</span>
<span style=color:#080;font-style:italic># on 2011-02-08 (LP: #104525). See http://www.pool.ntp.org/join.html for</span>
<span style=color:#080;font-style:italic># more information.</span>
<span style=color:#080;font-style:italic>#pool 0.ubuntu.pool.ntp.org iburst</span>
<span style=color:#080;font-style:italic>#pool 1.ubuntu.pool.ntp.org iburst</span>
<span style=color:#080;font-style:italic>#pool 2.ubuntu.pool.ntp.org iburst</span>
<span style=color:#080;font-style:italic>#pool 3.ubuntu.pool.ntp.org iburst</span>

server time1.aliyun.com
server time2.aliyun.com
server time3.aliyun.com
server time4.aliyun.com
server time5.aliyun.com
server time6.aliyun.com
server time7.aliyun.com
</code></pre></div><p>启动 ntp 服务</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo systemctl  restart ntp  <span style=color:#080;font-style:italic>#启动ntp服务</span>
</code></pre></div><h3 id=2-配置-golang-环境>2. 配置 Golang 环境</h3><p>下载 go 安装包</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mkdir ethereum ;<span style=color:#a2f>cd</span> ethereum
$ wget https://dl.google.com/go/go1.11.linux-amd64.tar.gz
</code></pre></div><p>解压安装包</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo tar zxvf  go1.11.linux-amd64.tar.gz   -C /usr/local/

</code></pre></div><p>配置环境变量</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$  mkdir -p ~/workspace/<span style=color:#666>{</span>src,pkg,bin<span style=color:#666>}</span> 
$ sudo cp  /etc/profile /etc/profile_shuzang_201809231354
$ sudo vim /etc/profile 
<span style=color:#080;font-style:italic># 配置文件中添加如下信息</span>
<span style=color:#a2f>export</span> <span style=color:#b8860b>GOROOT</span><span style=color:#666>=</span><span style=color:#b44>&#34;/usr/local/go&#34;</span>
<span style=color:#a2f>export</span> <span style=color:#b8860b>GOPATH</span><span style=color:#666>=</span><span style=color:#b44>&#34;/home/ubuntu/workspace&#34;</span>
<span style=color:#a2f>export</span> <span style=color:#b8860b>GOBIN</span><span style=color:#666>=</span><span style=color:#b8860b>$GOPATH</span>/bin
<span style=color:#a2f>export</span> <span style=color:#b8860b>PATH</span><span style=color:#666>=</span><span style=color:#b8860b>$PATH</span>:<span style=color:#b8860b>$GOROOT</span>/bin
</code></pre></div><p>检查配置</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>source</span> /etc/profile
$ go env
<span style=color:#b8860b>GOARCH</span><span style=color:#666>=</span><span style=color:#b44>&#34;amd64&#34;</span>
<span style=color:#b8860b>GOBIN</span><span style=color:#666>=</span><span style=color:#b44>&#34;/home/ubuntu/workspace/bin&#34;</span>
<span style=color:#b8860b>GOCACHE</span><span style=color:#666>=</span><span style=color:#b44>&#34;/home/ubuntu/.cache/go-build&#34;</span>
<span style=color:#b8860b>GOEXE</span><span style=color:#666>=</span><span style=color:#b44>&#34;&#34;</span>
<span style=color:#b8860b>GOFLAGS</span><span style=color:#666>=</span><span style=color:#b44>&#34;&#34;</span>
<span style=color:#b8860b>GOHOSTARCH</span><span style=color:#666>=</span><span style=color:#b44>&#34;amd64&#34;</span>
<span style=color:#b8860b>GOHOSTOS</span><span style=color:#666>=</span><span style=color:#b44>&#34;linux&#34;</span>
<span style=color:#b8860b>GOOS</span><span style=color:#666>=</span><span style=color:#b44>&#34;linux&#34;</span>
<span style=color:#b8860b>GOPATH</span><span style=color:#666>=</span><span style=color:#b44>&#34;/home/ubuntu/workspace&#34;</span>
<span style=color:#b8860b>GOPROXY</span><span style=color:#666>=</span><span style=color:#b44>&#34;&#34;</span>
......
</code></pre></div><h3 id=3-安装部署>3. 安装部署</h3><h4 id=31-获取源代码>3.1 获取源代码</h4><p>以太坊的源码文件网址如下</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>https://github.com/ethereum/go-ethereum
</code></pre></div><p>可以选择通过<code>git clone</code>或者下载<code>zip</code>包的方式进行源代码的获取, 为了方便起见，本文直接下载 zip 包上传至三台节点进行解压部署。</p><p>下载源码包</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>cd</span> /home/ubuntu/ethereum
$ wget  https://github.com/ethereum/go-ethereum/archive/master.zip
</code></pre></div><p>解压源码包</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ unzip master.zip
$ mkdir ~/workspace/github.com/
$ mv go-ethereum-master/   ~/workspace/github.com/go-ethereum
$ <span style=color:#a2f>cd</span> ~/workspace/github.com/go-ethereum ; make geth  <span style=color:#080;font-style:italic>#编译安装</span>
</code></pre></div><p>添加环境变量</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo vim /etc/profile
<span style=color:#080;font-style:italic># 添加及修改如下信息</span>
<span style=color:#a2f>export</span> <span style=color:#b8860b>GETH</span><span style=color:#666>=</span><span style=color:#b44>&#34;</span><span style=color:#b8860b>$GOPATH</span><span style=color:#b44>/github.com/go-ethereum/build</span><span style=color:#b44>&#34;</span>
<span style=color:#a2f>export</span> <span style=color:#b8860b>PATH</span><span style=color:#666>=</span><span style=color:#b8860b>$PATH</span>:<span style=color:#b8860b>$GOROOT</span>/bin:<span style=color:#b8860b>$GETH</span>/bin
</code></pre></div><p>测试生效</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=color:#a2f>source</span> /etc/profile
$ geth --help
</code></pre></div><p>至此环境配置完成，可以完成后进行虚拟机复制，得到三个虚拟机，然后再对主机名等进行修改，也可以等genesis.json文件创建完成后在进行虚拟机复制，然后修改相关名称。这样可以免去重复的环境配置工作，节省大量时间。</p><h4 id=32-创建创世区块>3.2 创建创世区块</h4><p>创建数据存储目录</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mkdir -p /home/ubuntu/nodeA/data0
$ <span style=color:#a2f>cd</span> /home/ubuntu/nodeA
</code></pre></div><p>创世区块配置文件<code>genesis.json</code></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#666>{</span>
<span style=color:#b44>&#34;config&#34;</span>: <span style=color:#666>{</span>
        <span style=color:#b44>&#34;chainId&#34;</span>: 66,
        <span style=color:#b44>&#34;homesteadBlock&#34;</span>: 0,
        <span style=color:#b44>&#34;eip155Block&#34;</span>: 0,
        <span style=color:#b44>&#34;eip158Block&#34;</span>: <span style=color:#666>0</span>
    <span style=color:#666>}</span>,
  <span style=color:#b44>&#34;alloc&#34;</span>      : <span style=color:#666>{</span><span style=color:#666>}</span>,
  <span style=color:#b44>&#34;coinbase&#34;</span>   : <span style=color:#b44>&#34;0x0000000000000000000000000000000000000000&#34;</span>,
  <span style=color:#b44>&#34;difficulty&#34;</span> : <span style=color:#b44>&#34;0x20000&#34;</span>,
  <span style=color:#b44>&#34;extraData&#34;</span>  : <span style=color:#b44>&#34;&#34;</span>,
  <span style=color:#b44>&#34;gasLimit&#34;</span>   : <span style=color:#b44>&#34;0x2fefd8&#34;</span>,
  <span style=color:#b44>&#34;nonce&#34;</span>      : <span style=color:#b44>&#34;0x0000000000000042&#34;</span>,
  <span style=color:#b44>&#34;mixhash&#34;</span>    : <span style=color:#b44>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
  <span style=color:#b44>&#34;parentHash&#34;</span> :<span style=color:#b44>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
  <span style=color:#b44>&#34;timestamp&#34;</span>  : <span style=color:#b44>&#34;0x00&#34;</span>
<span style=color:#666>}</span>
</code></pre></div><p>难度"difficulty"可以设置小一点，比如"0x40&rdquo;，这样挖矿会容易一点，不然配置不好就只能死等。</p><p>初始化创世区块</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ geth  --datadir data0/  init genesis.json
</code></pre></div><p><img src="https://s1.51cto.com/images/blog/201809/23/3cbb855f451fe1cb71b6b3efa7c598ac.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><h4 id=33-启动服务>3.3 启动服务</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ geth --datadir data0/ --networkid <span style=color:#666>66</span> --nodiscover console
...
Welcome to the Geth JavaScript console!
</code></pre></div><p>nodiscover : 设置为不自动发现，用于控制联盟链的节点加入
<img src="https://s1.51cto.com/images/blog/201809/23/813b196e06db099346217fd27420ac82.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><h3 id=4-节点通信>4. 节点通信</h3><h4 id=41-查看集群节点>4.1 查看集群节点</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; admin.peers
<span style=color:#666>[</span><span style=color:#666>]</span>
</code></pre></div><p>目前为空状态，表明未于其他节点进行通信。</p><h4 id=42-获取节点信息>4.2 获取节点信息</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; admin.nodeInfo.enode
</code></pre></div><p>分别在三个节点的 console 上执行命令，显示如下:</p><p>NodeA</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#b44>&#34;enode://d0d6a32cacb349c8f8c92372dc3a1e118384720636519a46c14067a3b62f6cfa8549a8766ade0f91790ebdadfb44341e03c50a171b714070527be96ed037707e@[::]:30303?discport=0&#34;</span>
</code></pre></div><p>NodeB</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#b44>&#34;enode://d9fc148c9808fbfee7954bd3324bfdff42777de7d2545ac3c2357f05939dbd8ee153cd32320a05f4dbf18138007f743f3a2097b62e71c3c47bb3cf1559dd1328@[::]:30303?discport=0&#34;</span>
</code></pre></div><p>NodeC</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#b44>&#34;enode://246782d2429f4697e18009505989ed82c2c0a664aab96ed80b96e28be42b6d9e2d11b27806ea43e46fddfcb3e9a41e9df4889636f51e3dadc0c937b0735d0bdc@[::]:30303?discport=0&#34;</span>
</code></pre></div><h4 id=43-将-nodeb-加入-nodea>4.3 将 NodeB 加入 NodeA</h4><p>在 NodeA 节点上执行如下命令</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt;admin.addPeer<span style=color:#666>(</span><span style=color:#b44>&#34;enode://d9fc148c9808fbfee7954bd3324bfdff42777de7d2545ac3c2357f05939dbd8ee153cd32320a05f4dbf18138007f743f3a2097b62e71c3c47bb3cf1559dd1328@172.16.222.190:30303&#34;</span><span style=color:#666>)</span>
</code></pre></div><p>返回<code>true</code>表示加入成功，注意</p><ul><li>将 [::] 修改为正确节点的 IP 地址，是之前用ifconfig命令查询并记录的本地地址，不支持DNS解析的域名地址，只支持点分十进制格式的IP地址</li><li>删除<code> ?discport=0</code></li></ul><h4 id=44-查看新加入的节点>4.4 查看新加入的节点</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; admin.peers
</code></pre></div><p>在 NodeA 节点上执行如下命令</p><p><img src="https://s1.51cto.com/images/blog/201809/23/c6d667762a931a233142b2cd992c8432.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><p>通过查看 localAddress 跟 remoteAddress 查看节点关联信息。</p><p>在 NodeB 节点上执行如下命令</p><p><img src="https://s1.51cto.com/images/blog/201809/23/be124927d617e9e6ea6fddab1fe5938d.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><p>在 NodeC 节点上执行如下命令</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; admin.peers
<span style=color:#666>[</span><span style=color:#666>]</span>
</code></pre></div><h4 id=45-将-nodec-加入-nodea-与-nodeb>4.5 将 NodeC 加入 NodeA 与 NodeB</h4><p>在 NodeA 节点上执行如下命令</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt;admin.addPeer<span style=color:#666>(</span><span style=color:#b44>&#34;enode://246782d2429f4697e18009505989ed82c2c0a664aab96ed80b96e28be42b6d9e2d11b27806ea43e46fddfcb3e9a41e9df4889636f51e3dadc0c937b0735d0bdc@172.16.222.191:30303&#34;</span><span style=color:#666>)</span>
</code></pre></div><p>在 NodeB 节点上执行如下命令</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt;admin.addPeer<span style=color:#666>(</span><span style=color:#b44>&#34;enode://246782d2429f4697e18009505989ed82c2c0a664aab96ed80b96e28be42b6d9e2d11b27806ea43e46fddfcb3e9a41e9df4889636f51e3dadc0c937b0735d0bdc@172.16.222.191:30303&#34;</span><span style=color:#666>)</span>
</code></pre></div><h4 id=46-查看节点加入信息>4.6 查看节点加入信息</h4><p>在 NodeA 节点上执行如下命令</p><p><img src="https://s1.51cto.com/images/blog/201809/23/81981335147af8327eab454f0d0c0aa7.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><p>在 NodeB 节点上执行如下命令</p><p><img src="https://s1.51cto.com/images/blog/201809/23/88f203a475aef146659a9b0709892b50.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><p>在 NodeC 节点上执行如下命令</p><p><img src="https://s1.51cto.com/images/blog/201809/23/8b778eb62c043cf3fe8868c1c518eec2.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><p>注意: 节点关机后，会自动被删除，节点重新启动后，会自动加入节点集群, 但是如果所有节点全部断掉，则需要重新添加。</p><h3 id=5-测试>5. 测试</h3><h4 id=51-转账测试>5.1 转账测试</h4><p>查看当前节点上的账户</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; personal.listAccounts
<span style=color:#080;font-style:italic># 或者</span>
&gt; eth.accounts
</code></pre></div><p>创建新账户</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; personal.newAccount<span style=color:#666>(</span><span style=color:#b44>&#34;shuzang1996&#34;</span><span style=color:#666>)</span>
<span style=color:#b44>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>
&gt; personal.newAccount<span style=color:#666>(</span><span style=color:#b44>&#34;shuzang1997&#34;</span><span style=color:#666>)</span>
<span style=color:#b44>&#34;0xc4f132a71da05257a71ae5872beabd12c50dbb81&#34;</span>
</code></pre></div><p>查看创建的账户</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; personal.listAccounts
<span style=color:#666>[</span><span style=color:#b44>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>,
<span style=color:#b44>&#34;0xc4f132a71da05257a71ae5872beabd12c50dbb81&#34;</span><span style=color:#666>]</span>
</code></pre></div><p>查看账户地址</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; personal.listWallets
</code></pre></div><p><img src="https://s1.51cto.com/images/blog/201809/23/b700aee79e063512c2f2c8f248a45919.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><p>查看挖矿账户</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; eth.coinbase
INFO <span style=color:#666>[</span>09-23|18:17:20.246<span style=color:#666>]</span> Etherbase automatically configured       <span style=color:#b8860b>address</span><span style=color:#666>=</span>0xcD3d95c64394452313b539a1f2dE54Eab2B80eEd
<span style=color:#b44>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>
</code></pre></div><p>默认情况下，平台会选择创建的第一个账户作为挖矿账户 (coinbase)，可以通过 miner.setEthbase() 进行 coinbase 账户的设置。</p><h4 id=52-挖矿测试>5.2 挖矿测试</h4><p>注意：在执行挖矿命令之前，务必在节点上面设置挖矿账户 (coinbase)，否则会报错<code>Error: etherbase missing: etherbase must be explicitly specified</code></p><p>当前账户信息为</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>NodeA:<span style=color:#666>[</span><span style=color:#b44>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>,<span style=color:#b44>&#34;0xc4f132a71da05257a71ae5872beabd12c50dbb81&#34;</span><span style=color:#666>]</span>
NodeB：<span style=color:#666>[</span><span style=color:#b44>&#34;0x22160d844b4016ed8f45ce63c405de72b1946696&#34;</span>,<span style=color:#b44>&#34;0x23e80b2f1f74fc6da4bcb015d17ed642bcc98c06&#34;</span><span style=color:#666>]</span>
NodeC:
<span style=color:#666>[</span><span style=color:#b44>&#34;0xa37539c0f41fea23c81f65b196df825202bc3bb5&#34;</span>,<span style=color:#b44>&#34;0x3c9cdb2f29606a0b35ae95b51521a41bb5b48e27&#34;</span><span style=color:#666>]</span>
</code></pre></div><p>启动挖矿</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; miner.start<span style=color:#666>(</span><span style=color:#666>)</span>
INFO <span style=color:#666>[</span>09-23|18:57:41.223<span style=color:#666>]</span> Updated mining threads                   <span style=color:#b8860b>threads</span><span style=color:#666>=</span><span style=color:#666>6</span>
INFO <span style=color:#666>[</span>09-23|18:57:41.223<span style=color:#666>]</span> Transaction pool price threshold updated <span style=color:#b8860b>price</span><span style=color:#666>=</span><span style=color:#666>1000000000</span>
null
&gt; INFO <span style=color:#666>[</span>09-23|18:57:41.225<span style=color:#666>]</span> Commit new mining work                   <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>b16ebe…9b0094 <span style=color:#b8860b>uncles</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>gas</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>fees</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>794.985µs
&gt; INFO <span style=color:#666>[</span>09-23|18:57:52.671<span style=color:#666>]</span> Successfully sealed new block            <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>b16ebe…9b0094 <span style=color:#b8860b>hash</span><span style=color:#666>=</span>082473…eb94b6 <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>11.446s
INFO <span style=color:#666>[</span>09-23|18:57:52.671<span style=color:#666>]</span> ined potential block                  <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>082473…eb94b6
INFO <span style=color:#666>[</span>09-23|18:57:52.672<span style=color:#666>]</span> Commit new mining work                   <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>2</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>7a67a7…3c98aa <span style=color:#b8860b>uncles</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>gas</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>fees</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>1.062ms
INFO <span style=color:#666>[</span>09-23|18:57:55.115<span style=color:#666>]</span> Successfully sealed new block            <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>2</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>7a67a7…3c98aa <span style=color:#b8860b>hash</span><span style=color:#666>=</span>c5cd53…c3e66b <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>2.443s
INFO <span style=color:#666>[</span>09-23|18:57:55.115<span style=color:#666>]</span> ined potential block                  <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>2</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>c5cd53…c3e66b
INFO <span style=color:#666>[</span>09-23|18:57:55.116<span style=color:#666>]</span> Commit new mining work                   <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>3</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>cc1414…f36ad7 <span style=color:#b8860b>uncles</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>gas</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>fees</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>343.53µs
INFO <span style=color:#666>[</span>09-23|18:57:55.166<span style=color:#666>]</span> Successfully sealed new block            <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>3</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>cc1414…f36ad7 <span style=color:#b8860b>hash</span><span style=color:#666>=</span>765d41…03ce17 <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>50.270ms
INFO <span style=color:#666>[</span>09-23|18:57:55.166<span style=color:#666>]</span> ined potential block                  <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>3</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>765d41…03ce17
INFO <span style=color:#666>[</span>09-23|18:57:55.167<span style=color:#666>]</span> Commit new mining work                   <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>4</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>cb5122…e36b2c <span style=color:#b8860b>uncles</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>gas</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>fees</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>718.996µs
INFO <span style=color:#666>[</span>09-23|18:57:58.048<span style=color:#666>]</span> Successfully sealed new block            <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>4</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>cb5122…e36b2c <span style=color:#b8860b>hash</span><span style=color:#666>=</span>ab1e6d…03b40b <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>2.881s
INFO <span style=color:#666>[</span>09-23|18:57:58.048<span style=color:#666>]</span> ined potential block                  <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>4</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>ab1e6d…03b40b
INFO <span style=color:#666>[</span>09-23|18:57:58.049<span style=color:#666>]</span> Commit new mining work                   <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>5</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>0dd5ab…5d47d9 <span style=color:#b8860b>uncles</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>gas</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>fees</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>159.
</code></pre></div><p>注意: 尽量将虚拟机的配置调高一点，否则会出现以下这些信息，耗时非常久。</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>INFO <span style=color:#666>[</span>09-23|18:48:45.223<span style=color:#666>]</span> Updated mining threads                   <span style=color:#b8860b>threads</span><span style=color:#666>=</span><span style=color:#666>2</span>
INFO <span style=color:#666>[</span>09-23|18:48:45.229<span style=color:#666>]</span> Transaction pool price threshold updated <span style=color:#b8860b>price</span><span style=color:#666>=</span><span style=color:#666>1000000000</span>
INFO <span style=color:#666>[</span>09-23|18:48:45.230<span style=color:#666>]</span> Etherbase automatically configured       <span style=color:#b8860b>address</span><span style=color:#666>=</span>0x22160D844B4016eD8f45cE63C405DE72B1946696
null
&gt; INFO <span style=color:#666>[</span>09-23|18:48:45.236<span style=color:#666>]</span> Commit new mining work                   <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>88e805…da6df6 <span style=color:#b8860b>uncles</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>gas</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>fees</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>4.290ms
INFO <span style=color:#666>[</span>09-23|18:48:48.930<span style=color:#666>]</span> Generating DAG in progress               <span style=color:#b8860b>epoch</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>percentage</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>2.961s
INFO <span style=color:#666>[</span>09-23|18:48:51.895<span style=color:#666>]</span> Generating DAG in progress               <span style=color:#b8860b>epoch</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>percentage</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>5.926s
INFO <span style=color:#666>[</span>09-23|18:48:54.739<span style=color:#666>]</span> Generating DAG in progress               <span style=color:#b8860b>epoch</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>percentage</span><span style=color:#666>=</span><span style=color:#666>2</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>8.770s
..........无尽的等待.........
INFO <span style=color:#666>[</span>09-23|18:53:50.638<span style=color:#666>]</span> Generated ethash verification cache      <span style=color:#b8860b>epoch</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>5m4.669s
INFO <span style=color:#666>[</span>09-23|18:54:08.357<span style=color:#666>]</span> Generating DAG in progress               <span style=color:#b8860b>epoch</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>percentage</span><span style=color:#666>=</span><span style=color:#666>0</span>  <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>15.480s
INFO <span style=color:#666>[</span>09-23|18:54:19.874<span style=color:#666>]</span> Generating DAG in progress               <span style=color:#b8860b>epoch</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>percentage</span><span style=color:#666>=</span><span style=color:#666>1</span>  <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>26.997s
INFO <span style=color:#666>[</span>09-23|18:54:29.911<span style=color:#666>]</span> Generating DAG in progress               <span style=color:#b8860b>epoch</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>percentage</span><span style=color:#666>=</span><span style=color:#666>2</span>  <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>37.034s
..........无尽的等待.........
WARN <span style=color:#666>[</span>09-23|18:57:57.836<span style=color:#666>]</span> Discarded bad propagated block           <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>082473…eb94b6
INFO <span style=color:#666>[</span>09-23|18:57:58.398<span style=color:#666>]</span> Block synchronisation started 
INFO <span style=color:#666>[</span>09-23|18:57:58.404<span style=color:#666>]</span> Mining aborted due to sync 
INFO <span style=color:#666>[</span>09-23|18:57:58.611<span style=color:#666>]</span> Imported new state entries               <span style=color:#b8860b>count</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>1.352ms   <span style=color:#b8860b>processed</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>pending</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>retry</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>duplicate</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>unexpected</span><span style=color:#666>=</span><span style=color:#666>0</span>
INFO <span style=color:#666>[</span>09-23|18:57:58.870<span style=color:#666>]</span> Imported new block headers               <span style=color:#b8860b>count</span><span style=color:#666>=</span><span style=color:#666>4</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>95.436ms  <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>4</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>ab1e6d…03b40b
INFO <span style=color:#666>[</span>09-23|18:57:58.889<span style=color:#666>]</span> Imported new chain segment               <span style=color:#b8860b>blocks</span><span style=color:#666>=</span><span style=color:#666>4</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>mgas</span><span style=color:#666>=</span>0.000 <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>16.862ms  <span style=color:#b8860b>mgasps</span><span style=color:#666>=</span>0.000 <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>4</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>ab1e6d…03b40b <span style=color:#b8860b>cache</span><span style=color:#666>=</span>849.00B
INFO <span style=color:#666>[</span>09-23|18:57:58.892<span style=color:#666>]</span> Imported new block headers               <span style=color:#b8860b>count</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>20.452ms  <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>5</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>75e595…4e4cc2
INFO <span style=color:#666>[</span>09-23|18:57:58.893<span style=color:#666>]</span> Imported new chain segment               <span style=color:#b8860b>blocks</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>mgas</span><span style=color:#666>=</span>0.000 <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>316.348µs <span style=color:#b8860b>mgasps</span><span style=color:#666>=</span>0.000 <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>5</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span><span style=color:#666>7</span>
..........无尽的等待.........
INFO <span style=color:#666>[</span>09-23|19:07:35.250<span style=color:#666>]</span> Generated ethash verification cache      <span style=color:#b8860b>epoch</span><span style=color:#666>=</span><span style=color:#666>1</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>13m42.368s
INFO <span style=color:#666>[</span>09-23|19:09:28.613<span style=color:#666>]</span> Successfully sealed new block            <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>37</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>95e0e0…ad356d <span style=color:#b8860b>hash</span><span style=color:#666>=</span>7506d6…015be8 <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>10m54.093s
INFO <span style=color:#666>[</span>09-23|19:09:28.614<span style=color:#666>]</span> ined potential block                  <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>37</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>7506d6…015be8
INFO <span style=color:#666>[</span>09-23|19:09:28.619<span style=color:#666>]</span> Commit new mining work                   <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>38</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>96b6b0…b3d462 <span style=color:#b8860b>uncles</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>gas</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>fees</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>662.942µs
INFO <span style=color:#666>[</span>09-23|19:12:33.104<span style=color:#666>]</span> Successfully sealed new block            <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>38</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>96b6b0…b3d462 <span style=color:#b8860b>hash</span><span style=color:#666>=</span>a91e1b…a15902 <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>3m4.484s
INFO <span style=color:#666>[</span>09-23|19:12:33.105<span style=color:#666>]</span> ined potential block                  <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>38</span> <span style=color:#b8860b>hash</span><span style=color:#666>=</span>a91e1b…a15902
INFO <span style=color:#666>[</span>09-23|19:12:33.107<span style=color:#666>]</span> Commit new mining work                   <span style=color:#b8860b>number</span><span style=color:#666>=</span><span style=color:#666>39</span> <span style=color:#b8860b>sealhash</span><span style=color:#666>=</span>6bf2a3…0d8be3 <span style=color:#b8860b>uncles</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>txs</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>gas</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>fees</span><span style=color:#666>=</span><span style=color:#666>0</span> <span style=color:#b8860b>elapsed</span><span style=color:#666>=</span>2.170ms
</code></pre></div><p>停止挖矿</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; miner.stop<span style=color:#666>(</span><span style=color:#666>)</span>
</code></pre></div><h4 id=53-查询余额>5.3 查询余额</h4><p>查询NodeA coinbase 账户(0xcd3d95c64394452313b539a1f2de54eab2b80eed)</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; eth.getBalance<span style=color:#666>(</span>eth.coinbase<span style=color:#666>)</span>
<span style=color:#666>180000000000000000000</span>
</code></pre></div><p>或者</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; eth.getBalance<span style=color:#666>(</span>eth.accounts<span style=color:#666>[</span>0<span style=color:#666>]</span><span style=color:#666>)</span>
<span style=color:#666>180000000000000000000</span>
</code></pre></div><p>可以对结果进行单位转换</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt;  web3.fromWei<span style=color:#666>(</span>eth.getBalance<span style=color:#666>(</span>eth.accounts<span style=color:#666>[</span>0<span style=color:#666>]</span><span style=color:#666>)</span>,<span style=color:#b44>&#39;ether&#39;</span><span style=color:#666>)</span>
<span style=color:#666>180</span>
</code></pre></div><p>NodeB 查询 NodeA 的 coinbase 账户</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; eth.getBalance<span style=color:#666>(</span><span style=color:#b44>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span><span style=color:#666>)</span>
<span style=color:#666>180000000000000000000</span>
</code></pre></div><p>NodeC 查询 NodeA 的 coinbase 账户</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; eth.getBalance<span style=color:#666>(</span><span style=color:#b44>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span><span style=color:#666>)</span>
<span style=color:#666>180000000000000000000</span>
</code></pre></div><p>同样，在 NodeA 和 NodeC 上面同样可以查询 NodeB 上面账号地址的余额。</p><h4 id=54-交易转账>5.4 交易转账</h4><p><strong>场景</strong>: NodeA(原有额度: 180) 的挖矿地址向 NodeB(原有额度: 10) 的挖矿地址转入 2 ETH</p><p>在进行交易转账之前，我们需要对交易转出方的账户进行解锁操作。NodeA 上执行如下命令，要求输入的密码是使用personal.newAccount创建账户时小括号内的参数</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; personal.unlockAccount<span style=color:#666>(</span><span style=color:#b44>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span><span style=color:#666>)</span>
Unlock account 0xcd3d95c64394452313b539a1f2de54eab2b80eed
Passphrase: 
<span style=color:#a2f>true</span>
</code></pre></div><p>设置转账金额，将 ETH 转成 Wei 进行交易</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; <span style=color:#b8860b>transferAmount</span><span style=color:#666>=</span> web3.toWei<span style=color:#666>(</span>2,<span style=color:#b44>&#39;ether&#39;</span><span style=color:#666>)</span>
<span style=color:#b44>&#34;2000000000000000000&#34;</span>
</code></pre></div><p>执行转账</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt;eth.sendTransaction<span style=color:#666>(</span><span style=color:#666>{</span>from:<span style=color:#b44>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>,to:<span style=color:#b44>&#34;0x22160d844b4016ed8f45ce63c405de72b1946696&#34;</span>,value:transferAmount<span style=color:#666>}</span><span style=color:#666>)</span>

INFO <span style=color:#666>[</span>09-23|20:13:20.968<span style=color:#666>]</span> Setting new <span style=color:#a2f>local</span> account                <span style=color:#b8860b>address</span><span style=color:#666>=</span>0xcD3d95c64394452313b539a1f2dE54Eab2B80eEd
INFO <span style=color:#666>[</span>09-23|20:13:20.968<span style=color:#666>]</span> Submitted transaction                    <span style=color:#b8860b>fullhash</span><span style=color:#666>=</span>0xd115c9ccfb1bfcc92faaf3ef6fae34ba670ef68cb03807d82d943141851985ce <span style=color:#b8860b>recipient</span><span style=color:#666>=</span>0x22160D844B4016eD8f45cE63C405DE72B1946696
<span style=color:#b44>&#34;0xd115c9ccfb1bfcc92faaf3ef6fae34ba670ef68cb03807d82d943141851985ce&#34;</span>
</code></pre></div><p>查询交易池状态</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; txpool.status
<span style=color:#666>{</span>
  pending: 1,
  queued: <span style=color:#666>0</span>
<span style=color:#666>}</span>
</code></pre></div><p>执行挖矿，指定只挖一个区块</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; miner.start<span style=color:#666>(</span><span style=color:#666>)</span>  ; admin.sleepBlocks<span style=color:#666>(</span>1<span style=color:#666>)</span>,miner.stop<span style=color:#666>(</span><span style=color:#666>)</span>
</code></pre></div><p><img src="https://s1.51cto.com/images/blog/201809/23/598f90361f820d9bd76c28352b61abbf.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><p>查看交易池</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; txpool.status

<span style=color:#666>{</span>
  pending: 0,
  queued: <span style=color:#666>0</span>
<span style=color:#666>}</span>
</code></pre></div><p>查看NodeB 的 CoinBase 账户余额</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&gt; web3.fromWei<span style=color:#666>(</span>eth.getBalance<span style=color:#666>(</span><span style=color:#b44>&#34;0x22160d844b4016ed8f45ce63c405de72b1946696&#34;</span><span style=color:#666>)</span>,<span style=color:#b44>&#39;ether&#39;</span><span style=color:#666>)</span>
<span style=color:#666>12</span>
</code></pre></div><h2 id=附录>附录</h2><h3 id=1-创世区块配置文件参数说明>1. 创世区块配置文件参数说明</h3><table><thead><tr><th>参数名</th><th>说明</th></tr></thead><tbody><tr><td>chainId</td><td>指定独立的区块链网络 ID，1-4 为保留 ID，其中 1 为主网 ID，其余为测试网</td></tr><tr><td>alloc</td><td>用来设置账号以及账号的以太币数量，私有链可以不进行设置</td></tr><tr><td>coinbase</td><td>用于获取挖矿奖励的矿工账号</td></tr><tr><td>difficulty</td><td>设置挖矿的难度系数</td></tr><tr><td>extraData</td><td>附加信息，自定义即可</td></tr><tr><td>gasLimit</td><td>设置对 gas 的消耗总量的限制, 私有链中可以填写任意数值 (大数值)</td></tr><tr><td>nonce</td><td>用于进行挖矿的随机数</td></tr><tr><td>mixhash</td><td>与 nonce 配合使用，用于挖矿</td></tr><tr><td>parentHash</td><td>上一个区块的 Hash 值，由于该区块为创世区块，所以父 Hash 值为 0</td></tr><tr><td>timestamp</td><td>时间戳</td></tr></tbody></table><p>data0 目录中的相关文件列表</p><p><img src="https://s1.51cto.com/images/blog/201809/23/3fb7ef20a861d9fed05427bcf778cf96.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt></p><ul><li><strong>chaindata : 存储区块数据</strong></li><li><strong>keystore: 存储账户数据</strong></li></ul><h3 id=2-私链服务启动常见参数说明>2. 私链服务启动常见参数说明</h3><table><thead><tr><th>参数名</th><th>说明</th></tr></thead><tbody><tr><td>identity</td><td>用于标识区块链的名称</td></tr><tr><td>init</td><td>用于指定创世区块的位置，并且创建创世区块以及相关目录结构</td></tr><tr><td>datadir</td><td>设置当前区块链网络数据存放的位置</td></tr><tr><td>port</td><td>区块链启动的监听端口，默认为 30303</td></tr><tr><td>rpc</td><td>启用 RPC 服务，可以用于智能合约的部署与调试，默认监听 127.0.0.1, 端口为 8545</td></tr><tr><td>rpcapi</td><td>设置 RPC 提供的 API 接口类型，一般为 db,eth.net.web3</td></tr><tr><td>networkid</td><td>设置当前区块链的网络 ID</td></tr><tr><td>nodiscover</td><td>设置节点不被自动发现，用于控制节点的加入</td></tr><tr><td>console</td><td>启用命令行模式，用于执行命令</td></tr><tr><td>help</td><td>帮助命令，所有参数的汇总</td></tr></tbody></table><h3 id=3-控制台命令说明>3. 控制台命令说明</h3><p>以太坊提供了一个交互式的 JavaScript 环境，可以在该环境中进行命令或者代码的执行操作，其中一些常用的以太坊 JavaScript 对象可以直接被调用。</p><table><thead><tr><th>对象名</th><th>说明</th></tr></thead><tbody><tr><td>eth</td><td>操作区块链相关的方法</td></tr><tr><td>eth.accounts</td><td>查看当前系统中的所有账户地址</td></tr><tr><td>eth.getBalance()</td><td>查询账户余额，返回单位为 Wei(1 ether=10^18Wei)</td></tr><tr><td>eth.blockNumber</td><td>列出区块总数</td></tr><tr><td>eth.getTransaction()</td><td>获取指定交易的状态信息</td></tr><tr><td>eth.getBlock()</td><td>获取指定区块的信息</td></tr><tr><td>net</td><td>用于查看 p2p 网络状态</td></tr><tr><td>admin</td><td>管理节点相关的方法</td></tr><tr><td>admin.peers</td><td>查看通讯的节点信息</td></tr><tr><td>admin.addPeer()</td><td>添加通讯 P2P 节点</td></tr><tr><td>miner</td><td>启动 / 停止挖矿相关方法</td></tr><tr><td>personal</td><td>用于管理账户</td></tr><tr><td>personal.newAccount()</td><td>创建账户</td></tr><tr><td>personal.unlockAccount()</td><td>解锁账户</td></tr><tr><td>txpool</td><td>查看交易池信息, txpool.status()</td></tr><tr><td>web3</td><td>包含了以上对象以及单位换算等方法</td></tr><tr><td>web3.fromWei()</td><td>Wei 换算成 ether 或者其他单位</td></tr><tr><td>web3.toWei()</td><td>将 ether 或者其他单位换算成 Wei</td></tr></tbody></table></div><footer class=post-footer><div class=post-tags><a href=/tags/%e5%8c%ba%e5%9d%97%e9%93%be rel=tag title=区块链>#区块链#</a></div><div class=addthis_inline_share_toolbox></div><div class=post-nav><div class=article-copyright><div class=article-copyright-info><p><span>声明：</span>以太坊开发1-虚拟机搭建以太坊私链</p><p><span>链接：</span>https://shuzang.github.io/2019/03/use-virtual-machine-builds-ethereum-private-chain/</p><p><span>作者：</span>书藏</p><p><span>声明： </span>本博客文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank style=text-decoration:underline>CC BY-NC-SA 3.0</a>许可协议，转载请注明出处！</p></div></div><div class=clear></div></div><div class=reward-qr-info><div>创作实属不易，如有帮助，那就打赏博主些许茶钱吧 ^_^</div><button id=rewardButton disable=enable onclick="var qr=document.getElementById('QR');if(qr.style.display==='none'){qr.style.display='block';}else{qr.style.display='none'}">
<span>赏</span></button><div id=QR style=display:none><div id=wechat style=display:inline-block><img id=wechat_qr src=/img/wechat-pay.png alt="WeChat Pay"><p>微信打赏</p></div><div id=alipay style=display:inline-block><img id=alipay_qr src=/img/ali-pay.png alt=Alipay><p>支付宝打赏</p></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=https://shuzang.github.io/2019/03/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%BC%80%E5%8F%912-%E5%88%9B%E4%B8%96%E5%8C%BA%E5%9D%97%E6%96%87%E4%BB%B6genesis.json/ rel=next title=以太坊开发2-创世区块文件genesis.json><i class="fa fa-chevron-left"></i>以太坊开发2-创世区块文件genesis.json</a></div><div class="post-nav-prev post-nav-item"><a href=https://shuzang.github.io/2019/02/blockchain-based-platform-architecture-for-industrial-iot/ rel=prev title="Blockchain-Based Platform Architecture for Industrial IoT">Blockchain-Based Platform Architecture for Industrial IoT
<i class="fa fa-chevron-right"></i></a></div></div><div id=wcomments></div></footer></article></section></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><section class="site-overview sidebar-panel sidebar-panel-active"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src=/images/avatar.png alt=书藏><p class=site-author-name itemprop=name>书藏</p><p class="site-description motion-element" itemprop=description></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/post/><span class=site-state-item-count>334</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>23</span>
<span class=site-state-item-name>标签</span></a></div></nav><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/shuzang/ target=_blank title=GitHub><i class="fa fa-fw fa-github"></i>GitHub</a></span></div><div class="tagcloud-of-blogroll motion-element tagcloud-of-blogroll-inline"><div class=tagcloud-of-blogroll-title><i class="fa fa-fw fa-tags"></i>标签云</div><ul class=tagcloud-of-blogroll-list><li class=tagcloud-of-blogroll-item><a href=/tags/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0>论文笔记</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E4%B9%A6%E8%97%8F%E7%9A%84%E7%94%9F%E6%B4%BB%E5%91%A8%E5%88%8A>书藏的生活周刊</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E7%A7%91%E7%A0%94%E8%AE%B0%E5%BD%95>科研记录</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/go%E8%AF%AD%E6%B3%95>Go语法</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80>计算机基础</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E6%9D%82%E8%B0%88>杂谈</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E5%8C%BA%E5%9D%97%E9%93%BE>区块链</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95>数据结构与算法</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E7%94%9F%E6%B4%BB%E6%8A%80%E8%83%BD>生活技能</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/go%E5%AE%9E%E6%88%98>Go实战</a></li></ul></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright><span class=copyright-year>&copy; 2018 - 2022</span>
<span class=with-love><i class="fa fa-heart"></i></span><span class=copyright-author>书藏的博客</span></div><div class=powered-info><span class=powered-by>Powered by - <a class=powered-link href=//gohugo.io target=_blank title=hugo>Hugo v0.63.2</a></span>
<span class=separator-line>/</span>
<span class=theme-info>Theme by - <a class=powered-link href=//github.com/elkan1788/hugo-theme-next target=_blank>NexT</a></span></div><div class=vistor-info><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span class=site-uv><i class="fa fa-user"></i><span class=busuanzi-value id=busuanzi_value_site_uv></span></span><span class=separator-line>/</span>
<span class=site-pv><i class="fa fa-eye"></i><span class=busuanzi-value id=busuanzi_value_site_pv></span></span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i><span id=scrollpercent><span>0</span>%</span></div></div><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.min.js></script><script type=text/javascript src=/js/search.js></script><script type=text/javascript src=/js/affix.js></script><script type=text/javascript src=/js/scrollspy.js></script><script type=text/javascript>function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');var trident=ua.indexOf('Trident/');var edge=ua.indexOf('Edge/');if(msie>0||trident>0||edge>0){return-1;}
return 1;}
function getCntViewHeight(){var docHeight=$('#content').height(),winHeight=$(window).height(),cntViewHeight=(docHeight>winHeight)?(docHeight-winHeight):($(document).height()-winHeight);return cntViewHeight;}
function getScrollbarWidth(){var $div=$('<div />').addClass('scrollbar-measure').prependTo('body');var div=$div[0];var scrollbarWidth=div.offsetWidth-div.clientWidth;$div.remove();return scrollbarWidth;}
function registerBackTop(){var THRESHOLD=50;var $top=$('.back-to-top');$(window).on('scroll',function(){$top.toggleClass('back-to-top-on',window.pageYOffset>THRESHOLD);var scrollTop=$(window).scrollTop();var cntViewHeight=getCntViewHeight();var scrollPercent=(scrollTop)/(cntViewHeight);var scrollPercentRounded=Math.round(scrollPercent*100);var scrollPercentMaxed=(scrollPercentRounded>100)?100:scrollPercentRounded;$('#scrollpercent>span').html(scrollPercentMaxed);});$top.on('click',function(){$("html,body").animate({scrollTop:0,screenLeft:0,},800);});}
function initScrollSpy(){var tocSelector='.post-toc';var $tocElement=$(tocSelector);var activeCurrentSelector='.active-current';$tocElement.on('activate.bs.scrollspy',function(){var $currentActiveElement=$(tocSelector+' .active').last();removeCurrentActiveClass();$currentActiveElement.addClass('active-current');}).on('clear.bs.scrollspy',removeCurrentActiveClass);$('body').scrollspy({target:tocSelector});function removeCurrentActiveClass(){$(tocSelector+' '+activeCurrentSelector).removeClass(activeCurrentSelector.substring(1));}}
function initAffix(){var headerHeight=$('.header-inner').height();var footerOffset=parseInt($('.main').css('padding-bottom'),10);var sidebarTop=headerHeight+10;$('.sidebar-inner').affix({offset:{top:sidebarTop,bottom:footerOffset}});$(document).on('affixed.bs.affix',function(){updateTOCHeight(document.body.clientHeight-100);});}
function initTOCDimension(){var updateTOCHeightTimer;$(window).on('resize',function(){updateTOCHeightTimer&&clearTimeout(updateTOCHeightTimer);updateTOCHeightTimer=setTimeout(function(){var tocWrapperHeight=document.body.clientHeight-100;updateTOCHeight(tocWrapperHeight);},0);});updateTOCHeight(document.body.clientHeight-100);var scrollbarWidth=getScrollbarWidth();$('.post-toc').css('width','calc(100% + '+scrollbarWidth+'px)');}
function updateTOCHeight(height){height=height||'auto';$('.post-toc').css('max-height',height);}
$(function(){var sidebarTop=$('.header-inner').height()+10;$('#sidebar').css({'margin-top':sidebarTop}).show();var sidebarMt=parseInt($('#sidebar').css('margin-top'));var sidebarInHeight=parseInt($('.sidebar-inner').css('height'));var sideHeight=sidebarMt+sidebarInHeight;var contentHeight=$('.content-wrap').height();if(contentHeight<sideHeight){$('.content-wrap').css('min-height',sideHeight);}
$('.site-nav-toggle').on('click',function(){var $siteNav=$('.site-nav');var $toggleLine=$('.toggle');var ON_CLASS_NAME='site-nav-on';var CLOSE_CLASS_NAME='toggle-close';var isSiteNavOn=$siteNav.hasClass(ON_CLASS_NAME);var animateAction=isSiteNavOn?'slideUp':'slideDown';var animateCallback=isSiteNavOn?'removeClass':'addClass';$siteNav.stop()[animateAction]('normal',function(){$siteNav[animateCallback](ON_CLASS_NAME);$toggleLine[animateCallback](CLOSE_CLASS_NAME);});});registerBackTop();initScrollSpy();initAffix();initTOCDimension();$('.sidebar-nav-toc').click(function(){$(this).addClass('sidebar-nav-active');$(this).next().removeClass('sidebar-nav-active');$('.'+$(this).next().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});$('.sidebar-nav-overview').click(function(){$(this).addClass('sidebar-nav-active');$(this).prev().removeClass('sidebar-nav-active');$('.'+$(this).prev().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});});</script><script src=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.js></script><script type=text/javascript>$(function(){$('.post-body').viewer();});</script><script type=text/javascript>$(function(){if(detectIE()>0){$.getScript(document.location.protocol+'//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js',function(){new Waline({el:'#wcomments',visitor:true,avatar:'wavatar',avatarCDN:'https://sdn.geekzu.org/avatar/',avatarForce:!1,wordLimit:'200',placeholder:' 欢迎留下您的宝贵建议，请填写您的昵称和邮箱便于后续交流. ^_^ ',requiredFields:['nick','mail'],serverURL:"Your WalineSerURL",lang:"zh-cn"});});}else{$('#wcomments').html('抱歉，Waline插件不支持IE或Edge，建议使用Chrome浏览器。');}});</script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=Your%20AddthisId"></script><script>(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js';}
else{bp.src='http://push.zhanzhang.baidu.com/push.js';}
var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script></body></html>