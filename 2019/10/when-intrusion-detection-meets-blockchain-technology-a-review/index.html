<!doctype html><html lang=zh-cn dir=content/zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=content-security-policy content="upgrade-insecure-requests"><title>When Intrusion Detection Meets Blockchain Technology A Review - 书藏的博客</title><meta name=keywords content="博客,程序员,区块链，思考,读书,笔记,生活,电影,旅游,"><meta name=author content="书藏"><meta property="og:title" content="When Intrusion Detection Meets Blockchain Technology A Review"><meta property="og:site_name" content="书藏的博客"><meta property="og:image" content="/img/avatar.png"><meta name=title content="When Intrusion Detection Meets Blockchain Technology A Review - 书藏的博客"><meta name=description content="书藏的个人博客，记录学习的东西，以月刊记录生活"><link rel="shortcut icon" href=/img/favicon.ico><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><link href=//cdn.bootcdn.net/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css rel=stylesheet type=text/css><link href=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.css rel=stylesheet><link href=/css/main.css rel=stylesheet type=text/css><link href=/css/syntax.css rel=stylesheet type=text/css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-209130979-1"></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-209130979-1 ');</script></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-hans><div class="container one-collumn sidebar-position-left page-home"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle role=button style=opacity:1;top:0><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><div class=multi-lang-switch><i class="fa fa-fw fa-language" style=margin-right:5px></i><a class=lang-link id=zh-cn href=#>中文</a></div><div class=custom-logo-site-title><a href=/ class=brand rel=start><span class=logo-line-before><i></i></span><span class=site-title>书藏的博客</span>
<span class=logo-line-after><i></i></span></a></div><p class=site-subtitle>凡心所向，素履以往</p></div><div class=site-nav-right><div class="toggle popup-trigger" style=opacity:1;top:0><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul id=menu class=menu><li class=menu-item><a href=/ rel=section><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class=menu-item><a href=/post rel=section><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class=menu-item><a href=/about.html rel=section><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于我</a></li><li class=menu-item><a href=/404.html rel=section><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益404</a></li><li class="menu-item menu-item-search"><a href=javascript:; class=popup-trigger><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class=site-search><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class=search-icon><i class="fa fa-search"></i></span><span class=popup-btn-close><i class="fa fa-times-circle"></i></span><div class=local-search-input-wrapper><input autocomplete=off placeholder=搜索关键字... spellcheck=false type=text id=local-search-input autocapitalize=none autocorrect=off></div></div><div id=local-search-result></div></div></div></nav></div></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><section id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline"><a class=post-title-link href=https://shuzang.github.io/2019/10/when-intrusion-detection-meets-blockchain-technology-a-review/ itemprop=url>When Intrusion Detection Meets Blockchain Technology A Review</a></h1><div class=post-meta><span class=post-time><i class="fa fa-calendar-o fa-fw"></i><span class=post-meta-item-text>时间：</span>
<time itemprop=dateCreated datetime=2016-03-22T13:04:35+08:00 content="2019-10-03">2019-10-03</time></span>
<span class=post-category>&nbsp; | &nbsp;
<i class="fa fa-folder-o fa-fw"></i><span class=post-meta-item-text>分类：</span>
<span itemprop=about itemscope itemtype=https://schema.org/Thing><a href=/categories/%E7%A0%94%E7%A9%B6%E7%94%9F%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF itemprop=url rel=index style=text-decoration:underline><span itemprop=name>研究生的区块链学习之路</span></a>
&nbsp;</span></span>
<span>|
<i class="fa fa-file-word-o fa-fw"></i><span class=post-meta-item-text>字数：</span>
<span class=leancloud-world-count>4337 字</span></span>
<span>|
<i class="fa fa-eye fa-fw"></i><span class=post-meta-item-text>阅读：</span>
<span class=leancloud-view-count>9分钟</span></span>
<span id=/2019/10/when-intrusion-detection-meets-blockchain-technology-a-review/ class=leancloud_visitors data-flag-title="When Intrusion Detection Meets Blockchain Technology A Review">|
<i class="fa fa-binoculars fa-fw"></i><span class=post-meta-item-text>阅读次数：</span>
<span class=leancloud-visitors-count></span></span></div></header><div class=post-body itemprop=articleBody><p>Meng W, Tischhauser E, Wang Q, et al. When Intrusion Detection Meets Blockchain Technology: A Review[J]. IEEE Access, 2018: 10179-10188.</p><p><strong>Abstract</strong>：以识别网络威胁和可能的事故为目的，入侵检测系统（IDS）已被广泛用于各种计算机网络。为了增强单个IDS的检测能力，协作入侵检测系统被提出（collaborative IDS， CIDS），它允许IDS节点间彼此交换数据。然而，当前检测架构中数据和信任管理仍然是两个主要的问题，能够降低检测系统的有效性。区块链可以保护数据存储的完整性和确保过程透明，因此有潜力被用于入侵检测领域。受此启发，本文就IDS和区块链的交叉做了一个综述，讨论区块链在入侵检测中的适用性，并明确该方向可能的挑战。</p><hr><p>论文内容主要分为如下几部分：</p><ol><li>介绍入侵检测和协作入侵检测(CID)的概念，声明CID当前面临的挑战：数据共享和信任管理。</li><li>介绍了区块链的概念，原理和主要应用。</li><li>叙述了在CID中，区块链如何用于解决数据共享和信任管理问题。</li></ol><p>引言部分也是对IDS和CIDS的说明，因此和后文进行合并，区块链部分的介绍已较为熟悉，浏览后未发现值得记录的知识，因此跳过。以下分为[入侵检测](##Intrusion Detection)，[协作入侵检测](##Collaborative Intrusion Detection)，[协作入侵检测的问题](##Challenges in Collaborative Intrusion Detection)，[基于区块链的解决方案](##Blockchain-Based Solutions)，[未来的研究方向](##Challenges and Future Trends)四部分对论文总结说明。并记录阅读时产生的想法。</p><h2 id=intrusion-detection>Intrusion Detection</h2><p>入侵检测描述了为了发现可能发生的事故的迹象监控网络或系统事件的过程。IDS是实现入侵检测过程的一种应用，主要提供两个功能：</p><ol><li>信息记录：一个IDS可以监控目标对象并在本地记录信息，收集的数据可以发送到其它设施（如中心化的事件管理服务器）进行分析。</li><li>警报生成：一个IDS的重要任务是生成警报将识别的重要异常通知安全管理员。误报率是衡量一个IDS是否有效的重要指标。</li></ol><p>基于IDS节点部署的位置，可以分为 host-based IDS (HIDS) and network-based IDS (NIDS)两种类型。前者主要监控本地系统的特征和主机中的系统事件，以防恶意活动。后者监测网络流量，并分析网络协议和可疑事件的流量负载。这种分类还可以更具体，比如wireless-based IDS，通过监控无线网络的packages和协议识别恶意活动。实际应用中，经常结合HIDS和NIDS使用，因为它们可以相互补充，从而提供更好的保护。如下图</p><p><img src=https://ieeexplore.ieee.org/mediastore_new/IEEE/content/media/6287639/8274985/8274922/meng1-2799854-small.gif alt="The deployment of HIDS and NIDS in a network environment"></p><p>基于检测方法也可将IDS分为两类：signature-based IDS(也称作 misuse-based IDS) 和 anomaly-based IDS。基于签名的IDS通过比较存储的签名和观察到的系统或网络事件，防止可能发生的事故，签名（或规则）是一种描述已知攻击的模式。基于签名的检测对已知威胁是有效的，但对于未知威胁和已知威胁的变种是无效的，例如，定义一个搜索<code>malware.exe</code>文件的签名，攻击者将攻击程序重命名为<code>malware1.exe</code>就可以轻松绕过检测。</p><p>基于匿名的检测则通过识别预定义的正常配置文件和观察到的事件间的显著差别来寻找可疑活动。正常配置文件通常通过在一段时间内监视典型活动的特征来创建，因此可以代表与用户、网络连接和应用相关的正常行为。如果发现异常情况，将会生成警报。大量文献研究了如何使用机器学习分类器来构建正常配置文件，另外，实际使用中，配置文件可以是静态或动态的，静态文件不会更新，但动态文件会根据安全策略周期性地更新。高误报率是anomaly-based IDS的最大限制。</p><p>除了以上两种检测方法外，还有一种方法叫做specification-based detection，它识别预定义的benign profile和观察到的事件间的偏差，benign profile和normal profile的不同在于前者定义了预先被接受的事件，比如，一个benign可以指定某种协议如何使用或不能如何使用。</p><blockquote><p>基于签名的IDS事先定义各自攻击模型，检测通过和这些攻击比较实现，现在所做的实验中的恶意行为判决一定意义也属于这种情况，事先定义了单位时间的请求数量，通过对比做出决策，并添加了判决，根据预定义规则进行惩罚。</p><p>基于匿名的IDS中normal profile可以用智能合约代替，不仅可以保证无篡改，还可以根据安全策略动态更新。本地节点做完机器学习分类后，生成配置文件，作为智能合约定义到区块链中，或者更新已有的智能合约。</p></blockquote><h2 id=collaborative-intrusion-detection>Collaborative Intrusion Detection</h2><p>协作入侵检测在实际应用中包括CIDN和CIDS，主要以增强单个IDS的性能为目标，因为单个IDS很容易被高级或复杂的攻击绕过，比如DoS攻击。根本原因是单个IDS没有关于它保护的环境的信息，而协作入侵检测框架则允许各IDS节点通过相互交换数据和信息来理解上下文。例如，通过收集不同检测传感器的流量特征，中央服务器对网络异常比单个IDS更敏感。传统的协作可分为如下类型：</p><ul><li>Hierarchical collaboration systems like EMERALD and DIFS；</li><li>Subscribe collaboration systems like COSSACK and DOMINO；</li><li>Peer-to-peer(P2P) query-based collaboration systems like Netbait and PIER。</li></ul><p>一个典型的协作入侵检测网络架构如下图所示，CIDN中的各节点可以交换彼此需要的信息。一个节点通常由以下几个部分组成：IDS模型，协作组件，P2P通信组件。具体而言，IDS模型执行入侵检测，监控网络流量和记录事件；协作组件负责帮助节点和其它节点交换需要的数据，以及执行某些操作如信任计算；P2P通信组件用于帮助建立和其它IDS节点的物理连接。</p><p><img src=https://ieeexplore.ieee.org/mediastore_new/IEEE/content/media/6287639/8274985/8274922/meng2-2799854-small.gif alt="The typical architecture of a collaborative intrusion detection network"></p><blockquote><p>CIDS和区块链看起来具有天然的可结合性，P2P通信由区块链本身完成，IDS模型由节点本身完成，信息和数据的交换（协作组件）通过发起交易或智能合约完成。</p><p>由于区块链本身通过共识实现了信任，一般不需要信任计算，若仍然需要，可以利用区块链中的激励机制实现，比如将信任度定义为通过智能合约定义的代币。</p></blockquote><h2 id=challenges-in-collaborative-intrusion-detection>Challenges in Collaborative Intrusion Detection</h2><p>异常检测已经研究了很久，但实际应用中仍有很多问题未解决，这些问题能显著减弱检测性能。</p><ol><li>处理能力跟不上流量大小：在流量较大的网络中，过量的数据包能显著降低检测系统性能，如果流量超过了IDS的最大处理能力，大量的数据包将被丢弃。</li><li>签名覆盖范围有限：基于签名的检测的检测能力严重依赖于可用签名，换句话说，检测性能受限于签名的数量和质量，然而，签名通常难以覆盖所有已知攻击和漏洞。</li><li>不准确的配置文件：基于匿名的检测很难建立准确的配置文件，具体而言，因为基于匿名的IDS通常利用机器学习建立配置文件，而训练数据，尤其是有标签的攻击数据，实际上限制很大，这回导致机器学习分类器的不准确。</li><li>大量错误警报：IDS生成准确的警报并通知安全管理员非常重要，然而，由于不成熟的签名和不准确的配置文件，错误的警报是一个大挑战，它们会显著降低检测性能，增加安全分析的压力。例如，一个大公司一天会产生超过10000个警报。</li></ol><p>尽管入侵检测已经研究了40年，数据共享和信任管理仍然是协作环境的两个主要挑战。</p><ol><li>数据共享：<strong>数据共享</strong>是一个主要的问题，因为让参与者信任彼此很难。PKI体系可以建立一定的信任，但并不总是有用。更进一步，由于对<strong>隐私</strong>的担心，参与者可能不愿意共享数据，而没有足够的数据，就不可能优化检测算法从而构建一个稳健的识别模型。例如，异常检测通常运用机器学习来构建正常配置文件，其中，分类器需要大量训练条目，但由于隐私问题，一些组织可能不想共享它们的数据，使得检测性能很难优化。</li><li>信任管理：众所周知，CIDN/CIDS对内部攻击是脆弱的，因为攻击者有权限访问网络。通常，计算信任被用于量化不同节点的信任级别，实际应用中，一般使用中央服务器收集节点流量和行为数据来计算每个节点的信任值。然而，当组织变得庞大，参与者变多，信任管理就会出现问题，因为很难找到可信第三方，例如，中央服务器可能被破坏。</li></ol><h2 id=blockchain-based-solutions>Blockchain-Based Solutions</h2><p>区块链取消了可信第三方的存在，拥有不可篡改的特性，使得它能用于解决入侵检测的以上问题。</p><ol><li><p>数据共享：数据共享问题主要由两方面引起：<strong>相互信任</strong>和<strong>数据隐私</strong>。相互信任意味着共享数据时，协作实体必须相信彼此不会泄露数据。数据隐私则是指共享的数据可能包含与参与者相关的一些信息，比如IP地址等，可能引起隐私泄露。</p><p>区块链是一种可能的解决方案，具体而言。数据共享可以被视为一系列的交易，参与的各方将数据共享的规则定义在区块链中，保持公开和不可变，这种情况下，其它的参与者可以访问区块链，阅读协议并确认数据所有权。协议的永久可见确保了一方不可以单方面否定它。</p><p>对于数据隐私，一个解决方案是共享转换后的数据而非原始数据。例如，实体A想用实体B的数据验证其设计的分类器的性能，可以将该分类器上传到区块链，实体B检索这一分类器在本地使用自己的数据运行，并将最后的结果返回给实体A。这样，实体B就可以维持原始数据的隐私。总的来说，对于数据共享问题，区块链可以作为数据所有者和其他方之间协议的永久性账本，帮助建立协作各方之间的相互信任，并保护数据隐私。</p></li><li><p>信任管理：通常，协作网络架构可以分为中心化的、层次的和分布式的。分布式架构以及进行了广泛的研究，而另外两种架构被认为受到可扩展性和单点故障的影响。对CIDN而言，在不同IDS节点间交换警报是极为重要的，这可以用来帮助寻找异常发生在哪儿。一些协作检测方法（如基于挑战的CIDN）利用警报评估其它节点的可信度，区块链可用于处理这一问题，例如，验证收到的警报信息是否未篡改。</p></li></ol><p>另外，警报交换也可以用来计算网络内节点的可信度。例如，Fung等设计了一个基于挑战的CIDN，其中节点可信度可以通过基于接收到的警报信息的满意度来计算。他们所提出的架构对一些内部攻击如newcomer attack和Betrayal attack是鲁棒的，但对协作攻击（一组恶意节点为了破坏网络协作提供错误的警报）没有用。因此，如何以一种稳健的方式执行信任计算仍是一个挑战。</p><p>区块链技术提供了一种可能的方式来解决这一问题。例如，Alexopoulos引入了基于区块链的CIDS，用区块链增强IDS节点间的信任，他们将每个IDS生成的原始警报视作区块链中的交易，从而在CIDN的协作节点间传播。所有协作者通过共识对其验证，可以保证存储在区块链中的警报信息是防篡改的。</p><p>区块链和入侵检测可以相互补充。一方面，如前所述，区块链用于提升IDS的性能，尤其是CIDS在数据共享和信任管理方面，另一方面，入侵检测可以帮助区块链系统中的异常。</p><p>要注意，用不用区块链解决入侵检测问题需要具体评判，传统方案依然值得研究。</p><blockquote><p>总体思路，节点在本地运行机器学习分类器生成正常配置文件，以智能合约的形式存储在区块链中，并根据安全策略周期性的更新，运行过程中检测系统事件并和配置文件比较，发现异常后生成警报并在区块链中记录保证不可篡改，判决合约根据警报和节点历史行为做出判决。</p></blockquote></div><footer class=post-footer><div class=post-tags><a href=/tags/%e8%ae%ba%e6%96%87%e7%ac%94%e8%ae%b0 rel=tag title=论文笔记>#论文笔记#</a></div><div class=addthis_inline_share_toolbox></div><div class=post-nav><div class=article-copyright><div class=article-copyright-info><p><span>声明：</span>When Intrusion Detection Meets Blockchain Technology A Review</p><p><span>链接：</span>https://shuzang.github.io/2019/10/when-intrusion-detection-meets-blockchain-technology-a-review/</p><p><span>作者：</span>书藏</p><p><span>声明： </span>本博客文章除特别声明外，均采用 <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank style=text-decoration:underline>CC BY-NC-SA 3.0</a>许可协议，转载请注明出处！</p></div></div><div class=clear></div></div><div class=reward-qr-info><div>创作实属不易，如有帮助，那就打赏博主些许茶钱吧 ^_^</div><button id=rewardButton disable=enable onclick="var qr=document.getElementById('QR');if(qr.style.display==='none'){qr.style.display='block';}else{qr.style.display='none'}">
<span>赏</span></button><div id=QR style=display:none><div id=wechat style=display:inline-block><img id=wechat_qr src=/img/wechat-pay.png alt="WeChat Pay"><p>微信打赏</p></div><div id=alipay style=display:inline-block><img id=alipay_qr src=/img/ali-pay.png alt=Alipay><p>支付宝打赏</p></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=https://shuzang.github.io/2019/10/medicine-and-health-1-daily-life-hygiene/ rel=next title=医药健康5-日常生活卫生><i class="fa fa-chevron-left"></i>医药健康5-日常生活卫生</a></div><div class="post-nav-prev post-nav-item"><a href=https://shuzang.github.io/2019/10/build-quorum-private-blockchain-network/ rel=prev title=研究记录6-Quorum区块链实验平台搭建>研究记录6-Quorum区块链实验平台搭建
<i class="fa fa-chevron-right"></i></a></div></div><div id=wcomments></div></footer></article></section></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><section class="site-overview sidebar-panel sidebar-panel-active"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src=/images/avatar.png alt=书藏><p class=site-author-name itemprop=name>书藏</p><p class="site-description motion-element" itemprop=description></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/post/><span class=site-state-item-count>334</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>23</span>
<span class=site-state-item-name>标签</span></a></div></nav><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/shuzang/ target=_blank title=GitHub><i class="fa fa-fw fa-github"></i>GitHub</a></span></div><div class="tagcloud-of-blogroll motion-element tagcloud-of-blogroll-inline"><div class=tagcloud-of-blogroll-title><i class="fa fa-fw fa-tags"></i>标签云</div><ul class=tagcloud-of-blogroll-list><li class=tagcloud-of-blogroll-item><a href=/tags/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0>论文笔记</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E4%B9%A6%E8%97%8F%E7%9A%84%E7%94%9F%E6%B4%BB%E5%91%A8%E5%88%8A>书藏的生活周刊</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E7%A7%91%E7%A0%94%E8%AE%B0%E5%BD%95>科研记录</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/go%E8%AF%AD%E6%B3%95>Go语法</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80>计算机基础</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E6%9D%82%E8%B0%88>杂谈</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E5%8C%BA%E5%9D%97%E9%93%BE>区块链</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95>数据结构与算法</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/%E7%94%9F%E6%B4%BB%E6%8A%80%E8%83%BD>生活技能</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/go%E5%AE%9E%E6%88%98>Go实战</a></li></ul></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright><span class=copyright-year>&copy; 2018 - 2022</span>
<span class=with-love><i class="fa fa-heart"></i></span><span class=copyright-author>书藏的博客</span></div><div class=powered-info><span class=powered-by>Powered by - <a class=powered-link href=//gohugo.io target=_blank title=hugo>Hugo v0.63.2</a></span>
<span class=separator-line>/</span>
<span class=theme-info>Theme by - <a class=powered-link href=//github.com/elkan1788/hugo-theme-next target=_blank>NexT</a></span></div><div class=vistor-info><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><span class=site-uv><i class="fa fa-user"></i><span class=busuanzi-value id=busuanzi_value_site_uv></span></span><span class=separator-line>/</span>
<span class=site-pv><i class="fa fa-eye"></i><span class=busuanzi-value id=busuanzi_value_site_pv></span></span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i><span id=scrollpercent><span>0</span>%</span></div></div><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.min.js></script><script type=text/javascript src=/js/search.js></script><script type=text/javascript src=/js/affix.js></script><script type=text/javascript src=/js/scrollspy.js></script><script type=text/javascript>function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');var trident=ua.indexOf('Trident/');var edge=ua.indexOf('Edge/');if(msie>0||trident>0||edge>0){return-1;}
return 1;}
function getCntViewHeight(){var docHeight=$('#content').height(),winHeight=$(window).height(),cntViewHeight=(docHeight>winHeight)?(docHeight-winHeight):($(document).height()-winHeight);return cntViewHeight;}
function getScrollbarWidth(){var $div=$('<div />').addClass('scrollbar-measure').prependTo('body');var div=$div[0];var scrollbarWidth=div.offsetWidth-div.clientWidth;$div.remove();return scrollbarWidth;}
function registerBackTop(){var THRESHOLD=50;var $top=$('.back-to-top');$(window).on('scroll',function(){$top.toggleClass('back-to-top-on',window.pageYOffset>THRESHOLD);var scrollTop=$(window).scrollTop();var cntViewHeight=getCntViewHeight();var scrollPercent=(scrollTop)/(cntViewHeight);var scrollPercentRounded=Math.round(scrollPercent*100);var scrollPercentMaxed=(scrollPercentRounded>100)?100:scrollPercentRounded;$('#scrollpercent>span').html(scrollPercentMaxed);});$top.on('click',function(){$("html,body").animate({scrollTop:0,screenLeft:0,},800);});}
function initScrollSpy(){var tocSelector='.post-toc';var $tocElement=$(tocSelector);var activeCurrentSelector='.active-current';$tocElement.on('activate.bs.scrollspy',function(){var $currentActiveElement=$(tocSelector+' .active').last();removeCurrentActiveClass();$currentActiveElement.addClass('active-current');}).on('clear.bs.scrollspy',removeCurrentActiveClass);$('body').scrollspy({target:tocSelector});function removeCurrentActiveClass(){$(tocSelector+' '+activeCurrentSelector).removeClass(activeCurrentSelector.substring(1));}}
function initAffix(){var headerHeight=$('.header-inner').height();var footerOffset=parseInt($('.main').css('padding-bottom'),10);var sidebarTop=headerHeight+10;$('.sidebar-inner').affix({offset:{top:sidebarTop,bottom:footerOffset}});$(document).on('affixed.bs.affix',function(){updateTOCHeight(document.body.clientHeight-100);});}
function initTOCDimension(){var updateTOCHeightTimer;$(window).on('resize',function(){updateTOCHeightTimer&&clearTimeout(updateTOCHeightTimer);updateTOCHeightTimer=setTimeout(function(){var tocWrapperHeight=document.body.clientHeight-100;updateTOCHeight(tocWrapperHeight);},0);});updateTOCHeight(document.body.clientHeight-100);var scrollbarWidth=getScrollbarWidth();$('.post-toc').css('width','calc(100% + '+scrollbarWidth+'px)');}
function updateTOCHeight(height){height=height||'auto';$('.post-toc').css('max-height',height);}
$(function(){var sidebarTop=$('.header-inner').height()+10;$('#sidebar').css({'margin-top':sidebarTop}).show();var sidebarMt=parseInt($('#sidebar').css('margin-top'));var sidebarInHeight=parseInt($('.sidebar-inner').css('height'));var sideHeight=sidebarMt+sidebarInHeight;var contentHeight=$('.content-wrap').height();if(contentHeight<sideHeight){$('.content-wrap').css('min-height',sideHeight);}
$('.site-nav-toggle').on('click',function(){var $siteNav=$('.site-nav');var $toggleLine=$('.toggle');var ON_CLASS_NAME='site-nav-on';var CLOSE_CLASS_NAME='toggle-close';var isSiteNavOn=$siteNav.hasClass(ON_CLASS_NAME);var animateAction=isSiteNavOn?'slideUp':'slideDown';var animateCallback=isSiteNavOn?'removeClass':'addClass';$siteNav.stop()[animateAction]('normal',function(){$siteNav[animateCallback](ON_CLASS_NAME);$toggleLine[animateCallback](CLOSE_CLASS_NAME);});});registerBackTop();initScrollSpy();initAffix();initTOCDimension();$('.sidebar-nav-toc').click(function(){$(this).addClass('sidebar-nav-active');$(this).next().removeClass('sidebar-nav-active');$('.'+$(this).next().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});$('.sidebar-nav-overview').click(function(){$(this).addClass('sidebar-nav-active');$(this).prev().removeClass('sidebar-nav-active');$('.'+$(this).prev().attr('data-target')).toggle(500);$('.'+$(this).attr('data-target')).toggle(500);});});</script><script src=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.js></script><script type=text/javascript>$(function(){$('.post-body').viewer();});</script><script type=text/javascript>$(function(){if(detectIE()>0){$.getScript(document.location.protocol+'//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js',function(){new Waline({el:'#wcomments',visitor:true,avatar:'wavatar',avatarCDN:'https://sdn.geekzu.org/avatar/',avatarForce:!1,wordLimit:'200',placeholder:' 欢迎留下您的宝贵建议，请填写您的昵称和邮箱便于后续交流. ^_^ ',requiredFields:['nick','mail'],serverURL:"Your WalineSerURL",lang:"zh-cn"});});}else{$('#wcomments').html('抱歉，Waline插件不支持IE或Edge，建议使用Chrome浏览器。');}});</script><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=Your%20AddthisId"></script><script>(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js';}
else{bp.src='http://push.zhanzhang.baidu.com/push.js';}
var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script></body></html>